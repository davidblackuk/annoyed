                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.6.8 #9946 (Linux)
                              4 ;--------------------------------------------------------
                              5 	.module hud
                              6 	.optsdcc -mz80
                              7 	
                              8 ;--------------------------------------------------------
                              9 ; Public variables in this module
                             10 ;--------------------------------------------------------
                             11 	.globl _cpct_getScreenPtr
                             12 	.globl _cpct_drawSprite
                             13 	.globl _hud_initialize
                             14 	.globl _hud_continue_from_death
                             15 	.globl _hud_update
                             16 	.globl _hud_restore_background
                             17 	.globl _hud_draw
                             18 	.globl _hud_initialize_internal
                             19 ;--------------------------------------------------------
                             20 ; special function registers
                             21 ;--------------------------------------------------------
                             22 ;--------------------------------------------------------
                             23 ; ram data
                             24 ;--------------------------------------------------------
                             25 	.area _DATA
                             26 ;--------------------------------------------------------
                             27 ; ram data
                             28 ;--------------------------------------------------------
                             29 	.area _INITIALIZED
                             30 ;--------------------------------------------------------
                             31 ; absolute external ram data
                             32 ;--------------------------------------------------------
                             33 	.area _DABS (ABS)
                             34 ;--------------------------------------------------------
                             35 ; global & static initialisations
                             36 ;--------------------------------------------------------
                             37 	.area _HOME
                             38 	.area _GSINIT
                             39 	.area _GSFINAL
                             40 	.area _GSINIT
                             41 ;--------------------------------------------------------
                             42 ; Home
                             43 ;--------------------------------------------------------
                             44 	.area _HOME
                             45 	.area _HOME
                             46 ;--------------------------------------------------------
                             47 ; code
                             48 ;--------------------------------------------------------
                             49 	.area _CODE
                             50 ;src/hud.c:18: void hud_initialize()
                             51 ;	---------------------------------
                             52 ; Function hud_initialize
                             53 ; ---------------------------------
   0000                      54 _hud_initialize::
                             55 ;src/hud.c:20: hud_initialize_internal(FALSE);
   0000 AF            [ 4]   56 	xor	a, a
   0001 F5            [11]   57 	push	af
   0002 33            [ 6]   58 	inc	sp
   0003 CDr14r00      [17]   59 	call	_hud_initialize_internal
   0006 33            [ 6]   60 	inc	sp
   0007 C9            [10]   61 	ret
                             62 ;src/hud.c:23: void hud_continue_from_death()
                             63 ;	---------------------------------
                             64 ; Function hud_continue_from_death
                             65 ; ---------------------------------
   0008                      66 _hud_continue_from_death::
                             67 ;src/hud.c:25: hud_initialize_internal(TRUE);
   0008 3E 01         [ 7]   68 	ld	a, #0x01
   000A F5            [11]   69 	push	af
   000B 33            [ 6]   70 	inc	sp
   000C CDr14r00      [17]   71 	call	_hud_initialize_internal
   000F 33            [ 6]   72 	inc	sp
   0010 C9            [10]   73 	ret
                             74 ;src/hud.c:28: void hud_update()
                             75 ;	---------------------------------
                             76 ; Function hud_update
                             77 ; ---------------------------------
   0011                      78 _hud_update::
                             79 ;src/hud.c:30: }
   0011 C9            [10]   80 	ret
                             81 ;src/hud.c:32: void hud_restore_background()
                             82 ;	---------------------------------
                             83 ; Function hud_restore_background
                             84 ; ---------------------------------
   0012                      85 _hud_restore_background::
                             86 ;src/hud.c:34: }
   0012 C9            [10]   87 	ret
                             88 ;src/hud.c:36: void hud_draw()
                             89 ;	---------------------------------
                             90 ; Function hud_draw
                             91 ; ---------------------------------
   0013                      92 _hud_draw::
                             93 ;src/hud.c:38: }
   0013 C9            [10]   94 	ret
                             95 ;src/hud.c:44: void hud_initialize_internal(u8 is_restart)
                             96 ;	---------------------------------
                             97 ; Function hud_initialize_internal
                             98 ; ---------------------------------
   0014                      99 _hud_initialize_internal::
   0014 DD E5         [15]  100 	push	ix
   0016 3B            [ 6]  101 	dec	sp
                            102 ;src/hud.c:46: u8 initial_y = SCREEN_HEIGHT_ROWS - (((lives_left - 1) / 2) * 8) - 8; 
   0017 21r00r00      [10]  103 	ld	hl,#_lives_left + 0
   001A 5E            [ 7]  104 	ld	e, (hl)
   001B 16 00         [ 7]  105 	ld	d, #0x00
   001D 6B            [ 4]  106 	ld	l, e
   001E 62            [ 4]  107 	ld	h, d
   001F 2B            [ 6]  108 	dec	hl
   0020 4D            [ 4]  109 	ld	c, l
   0021 44            [ 4]  110 	ld	b, h
   0022 CB 7C         [ 8]  111 	bit	7, h
   0024 28 02         [12]  112 	jr	Z,00107$
   0026 4B            [ 4]  113 	ld	c, e
   0027 42            [ 4]  114 	ld	b, d
   0028                     115 00107$:
   0028 CB 28         [ 8]  116 	sra	b
   002A CB 19         [ 8]  117 	rr	c
   002C 79            [ 4]  118 	ld	a, c
   002D 07            [ 4]  119 	rlca
   002E 07            [ 4]  120 	rlca
   002F 07            [ 4]  121 	rlca
   0030 E6 F8         [ 7]  122 	and	a, #0xf8
   0032 4F            [ 4]  123 	ld	c, a
   0033 3E C0         [ 7]  124 	ld	a, #0xc0
   0035 91            [ 4]  125 	sub	a, c
   0036 4F            [ 4]  126 	ld	c, a
                            127 ;src/hud.c:48: for (u8 i = 0; i < lives_left; i++)
   0037 06 00         [ 7]  128 	ld	b, #0x00
   0039                     129 00103$:
   0039 21r00r00      [10]  130 	ld	hl, #_lives_left
   003C 78            [ 4]  131 	ld	a, b
   003D 96            [ 7]  132 	sub	a, (hl)
   003E 30 30         [12]  133 	jr	NC,00105$
                            134 ;src/hud.c:50: u8 x = ((i & 1) == 0) ? HUD_LEFT : HUD_LEFT + (SP_LIFE_W + 1);
   0040 CB 40         [ 8]  135 	bit	0, b
   0042 20 04         [12]  136 	jr	NZ,00108$
   0044 16 44         [ 7]  137 	ld	d, #0x44
   0046 18 02         [12]  138 	jr	00109$
   0048                     139 00108$:
   0048 16 4A         [ 7]  140 	ld	d, #0x4a
   004A                     141 00109$:
                            142 ;src/hud.c:51: u8 y = initial_y + ((i / 2) * 8);
   004A 78            [ 4]  143 	ld	a, b
   004B CB 3F         [ 8]  144 	srl	a
   004D 07            [ 4]  145 	rlca
   004E 07            [ 4]  146 	rlca
   004F 07            [ 4]  147 	rlca
   0050 E6 F8         [ 7]  148 	and	a, #0xf8
   0052 5F            [ 4]  149 	ld	e, a
   0053 81            [ 4]  150 	add	a,c
                            151 ;src/hud.c:53: u8 *pvmem = cpct_getScreenPtr(CPCT_VMEM_START, x, y);
   0054 C5            [11]  152 	push	bc
   0055 F5            [11]  153 	push	af
   0056 33            [ 6]  154 	inc	sp
   0057 D5            [11]  155 	push	de
   0058 33            [ 6]  156 	inc	sp
   0059 21 00 C0      [10]  157 	ld	hl, #0xc000
   005C E5            [11]  158 	push	hl
   005D CDr00r00      [17]  159 	call	_cpct_getScreenPtr
   0060 11 05 06      [10]  160 	ld	de, #0x0605
   0063 D5            [11]  161 	push	de
   0064 E5            [11]  162 	push	hl
   0065 21r00r00      [10]  163 	ld	hl, #_sp_life
   0068 E5            [11]  164 	push	hl
   0069 CDr00r00      [17]  165 	call	_cpct_drawSprite
   006C C1            [10]  166 	pop	bc
                            167 ;src/hud.c:48: for (u8 i = 0; i < lives_left; i++)
   006D 04            [ 4]  168 	inc	b
   006E 18 C9         [12]  169 	jr	00103$
   0070                     170 00105$:
   0070 33            [ 6]  171 	inc	sp
   0071 DD E1         [14]  172 	pop	ix
   0073 C9            [10]  173 	ret
                            174 	.area _CODE
                            175 	.area _INITIALIZER
                            176 	.area _CABS (ABS)
