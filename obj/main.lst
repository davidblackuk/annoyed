                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.6.8 #9946 (Linux)
                              4 ;--------------------------------------------------------
                              5 	.module main
                              6 	.optsdcc -mz80
                              7 	
                              8 ;--------------------------------------------------------
                              9 ; Public variables in this module
                             10 ;--------------------------------------------------------
                             11 	.globl _main
                             12 	.globl _initializeCpc
                             13 	.globl _module_menu_initialize
                             14 	.globl _module_game_initialize
                             15 	.globl _cpct_setPALColour
                             16 	.globl _cpct_setPalette
                             17 	.globl _cpct_waitVSYNC
                             18 	.globl _cpct_setVideoMode
                             19 	.globl _cpct_disableFirmware
                             20 	.globl _play_scene
                             21 ;--------------------------------------------------------
                             22 ; special function registers
                             23 ;--------------------------------------------------------
                             24 ;--------------------------------------------------------
                             25 ; ram data
                             26 ;--------------------------------------------------------
                             27 	.area _DATA
                             28 ;--------------------------------------------------------
                             29 ; ram data
                             30 ;--------------------------------------------------------
                             31 	.area _INITIALIZED
                             32 ;--------------------------------------------------------
                             33 ; absolute external ram data
                             34 ;--------------------------------------------------------
                             35 	.area _DABS (ABS)
                             36 ;--------------------------------------------------------
                             37 ; global & static initialisations
                             38 ;--------------------------------------------------------
                             39 	.area _HOME
                             40 	.area _GSINIT
                             41 	.area _GSFINAL
                             42 	.area _GSINIT
                             43 ;--------------------------------------------------------
                             44 ; Home
                             45 ;--------------------------------------------------------
                             46 	.area _HOME
                             47 	.area _HOME
                             48 ;--------------------------------------------------------
                             49 ; code
                             50 ;--------------------------------------------------------
                             51 	.area _CODE
                             52 ;src/main.c:10: cpctm_createTransparentMaskTable(g_masktable, 0x0100, M0, 4);
                             53 ;	---------------------------------
                             54 ; Function dummy_cpct_transparentMaskTable4M0_container
                             55 ; ---------------------------------
   0000                      56 _dummy_cpct_transparentMaskTable4M0_container::
                             57 	.area _g_masktable_ (ABS) 
   0100                      58 	.org 0x0100 
   0100                      59 	 _g_masktable::
   0100 00 00 00 00 00 00    60 	.db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 
        00 00
   0108 00 00 00 00 00 00    61 	.db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 
        00 00
   0110 55 00 55 00 00 00    62 	.db 0x55, 0x00, 0x55, 0x00, 0x00, 0x00, 0x00, 0x00 
        00 00
   0118 55 00 55 00 00 00    63 	.db 0x55, 0x00, 0x55, 0x00, 0x00, 0x00, 0x00, 0x00 
        00 00
   0120 AA AA 00 00 AA AA    64 	.db 0xAA, 0xAA, 0x00, 0x00, 0xAA, 0xAA, 0x00, 0x00 
        00 00
   0128 00 00 00 00 00 00    65 	.db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 
        00 00
   0130 FF AA 55 00 AA AA    66 	.db 0xFF, 0xAA, 0x55, 0x00, 0xAA, 0xAA, 0x00, 0x00 
        00 00
   0138 55 00 55 00 00 00    67 	.db 0x55, 0x00, 0x55, 0x00, 0x00, 0x00, 0x00, 0x00 
        00 00
   0140 00 00 00 00 00 00    68 	.db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 
        00 00
   0148 00 00 00 00 00 00    69 	.db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 
        00 00
   0150 00 00 00 00 00 00    70 	.db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 
        00 00
   0158 00 00 00 00 00 00    71 	.db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 
        00 00
   0160 AA AA 00 00 AA AA    72 	.db 0xAA, 0xAA, 0x00, 0x00, 0xAA, 0xAA, 0x00, 0x00 
        00 00
   0168 00 00 00 00 00 00    73 	.db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 
        00 00
   0170 AA AA 00 00 AA AA    74 	.db 0xAA, 0xAA, 0x00, 0x00, 0xAA, 0xAA, 0x00, 0x00 
        00 00
   0178 00 00 00 00 00 00    75 	.db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 
        00 00
   0180 00 00 00 00 00 00    76 	.db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 
        00 00
   0188 00 00 00 00 00 00    77 	.db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 
        00 00
   0190 55 00 55 00 00 00    78 	.db 0x55, 0x00, 0x55, 0x00, 0x00, 0x00, 0x00, 0x00 
        00 00
   0198 55 00 55 00 00 00    79 	.db 0x55, 0x00, 0x55, 0x00, 0x00, 0x00, 0x00, 0x00 
        00 00
   01A0 00 00 00 00 00 00    80 	.db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 
        00 00
   01A8 00 00 00 00 00 00    81 	.db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 
        00 00
   01B0 55 00 55 00 00 00    82 	.db 0x55, 0x00, 0x55, 0x00, 0x00, 0x00, 0x00, 0x00 
        00 00
   01B8 55 00 55 00 00 00    83 	.db 0x55, 0x00, 0x55, 0x00, 0x00, 0x00, 0x00, 0x00 
        00 00
   01C0 00 00 00 00 00 00    84 	.db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 
        00 00
   01C8 00 00 00 00 00 00    85 	.db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 
        00 00
   01D0 00 00 00 00 00 00    86 	.db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 
        00 00
   01D8 00 00 00 00 00 00    87 	.db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 
        00 00
   01E0 00 00 00 00 00 00    88 	.db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 
        00 00
   01E8 00 00 00 00 00 00    89 	.db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 
        00 00
   01F0 00 00 00 00 00 00    90 	.db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 
        00 00
   01F8 00 00 00 00 00 00    91 	.db 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 
        00 00
                             92 	.area _CSEG (REL, CON) 
                             93 ;src/main.c:14: void initializeCpc()
                             94 ;	---------------------------------
                             95 ; Function initializeCpc
                             96 ; ---------------------------------
   0000                      97 _initializeCpc::
                             98 ;src/main.c:18: cpct_disableFirmware();
   0000 CDr00r00      [17]   99 	call	_cpct_disableFirmware
                            100 ;src/main.c:20: cpct_setBorder(HW_BLACK);
   0003 21 10 14      [10]  101 	ld	hl, #0x1410
   0006 E5            [11]  102 	push	hl
   0007 CDr00r00      [17]  103 	call	_cpct_setPALColour
                            104 ;src/main.c:21: cpct_setBorder(HW_WHITE);
   000A 21 10 00      [10]  105 	ld	hl, #0x0010
   000D E5            [11]  106 	push	hl
   000E CDr00r00      [17]  107 	call	_cpct_setPALColour
                            108 ;src/main.c:25: cpct_setVideoMode(0);
   0011 2E 00         [ 7]  109 	ld	l, #0x00
   0013 CDr00r00      [17]  110 	call	_cpct_setVideoMode
                            111 ;src/main.c:27: cpct_setPalette((u8 *)g_palette, 15);
   0016 21 0F 00      [10]  112 	ld	hl, #0x000f
   0019 E5            [11]  113 	push	hl
   001A 21r00r00      [10]  114 	ld	hl, #_g_palette
   001D E5            [11]  115 	push	hl
   001E CDr00r00      [17]  116 	call	_cpct_setPalette
   0021 C9            [10]  117 	ret
                            118 ;src/main.c:32: void main(void)
                            119 ;	---------------------------------
                            120 ; Function main
                            121 ; ---------------------------------
   0022                     122 _main::
                            123 ;src/main.c:35: initializeCpc();
   0022 CDr00r00      [17]  124 	call	_initializeCpc
                            125 ;src/main.c:36: module_menu_initialize();
   0025 CDr00r00      [17]  126 	call	_module_menu_initialize
                            127 ;src/main.c:37: module_game_initialize();
   0028 CDr00r00      [17]  128 	call	_module_game_initialize
                            129 ;src/main.c:40: while (1) {
   002B                     130 00102$:
                            131 ;src/main.c:41: play_scene(&scene_menu);   
   002B 21r00r00      [10]  132 	ld	hl, #_scene_menu
   002E E5            [11]  133 	push	hl
   002F CDr3Cr00      [17]  134 	call	_play_scene
                            135 ;src/main.c:42: play_scene(&scene_game);   
   0032 21r00r00      [10]  136 	ld	hl, #_scene_game
   0035 E3            [19]  137 	ex	(sp),hl
   0036 CDr3Cr00      [17]  138 	call	_play_scene
   0039 F1            [10]  139 	pop	af
   003A 18 EF         [12]  140 	jr	00102$
                            141 ;src/main.c:47: void play_scene(Scene *scene) {
                            142 ;	---------------------------------
                            143 ; Function play_scene
                            144 ; ---------------------------------
   003C                     145 _play_scene::
   003C DD E5         [15]  146 	push	ix
   003E DD 21 00 00   [14]  147 	ld	ix,#0
   0042 DD 39         [15]  148 	add	ix,sp
   0044 F5            [11]  149 	push	af
                            150 ;src/main.c:50: scene->initialize();
   0045 DD 4E 04      [19]  151 	ld	c,4 (ix)
   0048 DD 46 05      [19]  152 	ld	b,5 (ix)
   004B 69            [ 4]  153 	ld	l, c
   004C 60            [ 4]  154 	ld	h, b
   004D 5E            [ 7]  155 	ld	e, (hl)
   004E 23            [ 6]  156 	inc	hl
   004F 66            [ 7]  157 	ld	h, (hl)
   0050 C5            [11]  158 	push	bc
   0051 6B            [ 4]  159 	ld	l, e
   0052 CDr00r00      [17]  160 	call	___sdcc_call_hl
   0055 C1            [10]  161 	pop	bc
                            162 ;src/main.c:52: do
   0056 33            [ 6]  163 	inc	sp
   0057 33            [ 6]  164 	inc	sp
   0058 C5            [11]  165 	push	bc
   0059                     166 00102$:
                            167 ;src/main.c:57: cpct_waitVSYNC();
   0059 C5            [11]  168 	push	bc
   005A CDr00r00      [17]  169 	call	_cpct_waitVSYNC
   005D C1            [10]  170 	pop	bc
                            171 ;src/main.c:59: scene->draw();
   005E E1            [10]  172 	pop	hl
   005F E5            [11]  173 	push	hl
   0060 23            [ 6]  174 	inc	hl
   0061 23            [ 6]  175 	inc	hl
   0062 5E            [ 7]  176 	ld	e, (hl)
   0063 23            [ 6]  177 	inc	hl
   0064 66            [ 7]  178 	ld	h, (hl)
   0065 C5            [11]  179 	push	bc
   0066 6B            [ 4]  180 	ld	l, e
   0067 CDr00r00      [17]  181 	call	___sdcc_call_hl
   006A C1            [10]  182 	pop	bc
                            183 ;src/main.c:60: state = scene->update();
   006B 69            [ 4]  184 	ld	l, c
   006C 60            [ 4]  185 	ld	h, b
   006D 11 04 00      [10]  186 	ld	de, #0x0004
   0070 19            [11]  187 	add	hl, de
   0071 5E            [ 7]  188 	ld	e, (hl)
   0072 23            [ 6]  189 	inc	hl
   0073 66            [ 7]  190 	ld	h, (hl)
   0074 C5            [11]  191 	push	bc
   0075 6B            [ 4]  192 	ld	l, e
   0076 CDr00r00      [17]  193 	call	___sdcc_call_hl
   0079 C1            [10]  194 	pop	bc
                            195 ;src/main.c:66: for (i16 i=0; i< t; i++)
   007A 11 00 00      [10]  196 	ld	de, #0x0000
   007D                     197 00106$:
   007D 7B            [ 4]  198 	ld	a, e
   007E D6 05         [ 7]  199 	sub	a, #0x05
   0080 7A            [ 4]  200 	ld	a, d
   0081 17            [ 4]  201 	rla
   0082 3F            [ 4]  202 	ccf
   0083 1F            [ 4]  203 	rra
   0084 DE 80         [ 7]  204 	sbc	a, #0x80
   0086 30 03         [12]  205 	jr	NC,00103$
   0088 13            [ 6]  206 	inc	de
   0089 18 F2         [12]  207 	jr	00106$
   008B                     208 00103$:
                            209 ;src/main.c:73: } while (state == Continue);
   008B 7D            [ 4]  210 	ld	a, l
   008C B7            [ 4]  211 	or	a, a
   008D 28 CA         [12]  212 	jr	Z,00102$
   008F DD F9         [10]  213 	ld	sp, ix
   0091 DD E1         [14]  214 	pop	ix
   0093 C9            [10]  215 	ret
                            216 	.area _CODE
                            217 	.area _INITIALIZER
                            218 	.area _CABS (ABS)
