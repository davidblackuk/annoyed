                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.6.8 #9946 (Linux)
                              4 ;--------------------------------------------------------
                              5 	.module blocks
                              6 	.optsdcc -mz80
                              7 	
                              8 ;--------------------------------------------------------
                              9 ; Public variables in this module
                             10 ;--------------------------------------------------------
                             11 	.globl _background_restore_tiles_exact
                             12 	.globl _cpct_etm_drawTileBox2x4
                             13 	.globl _cpct_getScreenPtr
                             14 	.globl _cpct_drawSolidBox
                             15 	.globl _blocks_remaining
                             16 	.globl _block_meta
                             17 	.globl _blocks_initialize
                             18 	.globl _blocks_draw
                             19 	.globl _blocks_restore_background
                             20 	.globl _blocks_bounce_ball
                             21 	.globl _is_ball_colliding_with_block
                             22 	.globl _get_metaData_at
                             23 	.globl _draw_current_blocks
                             24 	.globl _map_blocks_to_meta
                             25 	.globl _plant_tile_meta
                             26 ;--------------------------------------------------------
                             27 ; special function registers
                             28 ;--------------------------------------------------------
                             29 ;--------------------------------------------------------
                             30 ; ram data
                             31 ;--------------------------------------------------------
                             32 	.area _DATA
   0000                      33 _block_meta::
   0000                      34 	.ds 1092
   0444                      35 _blocks_remaining::
   0444                      36 	.ds 2
                             37 ;--------------------------------------------------------
                             38 ; ram data
                             39 ;--------------------------------------------------------
                             40 	.area _INITIALIZED
                             41 ;--------------------------------------------------------
                             42 ; absolute external ram data
                             43 ;--------------------------------------------------------
                             44 	.area _DABS (ABS)
                             45 ;--------------------------------------------------------
                             46 ; global & static initialisations
                             47 ;--------------------------------------------------------
                             48 	.area _HOME
                             49 	.area _GSINIT
                             50 	.area _GSFINAL
                             51 	.area _GSINIT
                             52 ;--------------------------------------------------------
                             53 ; Home
                             54 ;--------------------------------------------------------
                             55 	.area _HOME
                             56 	.area _HOME
                             57 ;--------------------------------------------------------
                             58 ; code
                             59 ;--------------------------------------------------------
                             60 	.area _CODE
                             61 ;src/blocks.c:39: void blocks_initialize(u8 is_restart)
                             62 ;	---------------------------------
                             63 ; Function blocks_initialize
                             64 ; ---------------------------------
   0000                      65 _blocks_initialize::
                             66 ;src/blocks.c:41: if (!is_restart)
   0000 21 02 00      [10]   67 	ld	hl, #2+0
   0003 39            [11]   68 	add	hl, sp
   0004 7E            [ 7]   69 	ld	a, (hl)
   0005 B7            [ 4]   70 	or	a, a
   0006 C2r1Br02      [10]   71 	jp	NZ,_draw_current_blocks
                             72 ;src/blocks.c:44: map_blocks_to_meta();
   0009 CDrA3r02      [17]   73 	call	_map_blocks_to_meta
                             74 ;src/blocks.c:49: draw_current_blocks();
   000C C3r1Br02      [10]   75 	jp  _draw_current_blocks
                             76 ;src/blocks.c:52: void blocks_draw()
                             77 ;	---------------------------------
                             78 ; Function blocks_draw
                             79 ; ---------------------------------
   000F                      80 _blocks_draw::
                             81 ;src/blocks.c:54: }
   000F C9            [10]   82 	ret
                             83 ;src/blocks.c:56: void blocks_restore_background()
                             84 ;	---------------------------------
                             85 ; Function blocks_restore_background
                             86 ; ---------------------------------
   0010                      87 _blocks_restore_background::
                             88 ;src/blocks.c:58: }
   0010 C9            [10]   89 	ret
                             90 ;src/blocks.c:60: BounceHits blocks_bounce_ball(Ball *ball, i16 at_x, i16 at_y)
                             91 ;	---------------------------------
                             92 ; Function blocks_bounce_ball
                             93 ; ---------------------------------
   0011                      94 _blocks_bounce_ball::
   0011 DD E5         [15]   95 	push	ix
   0013 DD 21 00 00   [14]   96 	ld	ix,#0
   0017 DD 39         [15]   97 	add	ix,sp
   0019 F5            [11]   98 	push	af
                             99 ;src/blocks.c:67: if (W_2_S_Y(at_y) < BRICKS_MAP_PIXEL_TOP_SCR ||
   001A DD 7E 08      [19]  100 	ld	a, 8 (ix)
   001D C6 08         [ 7]  101 	add	a, #0x08
   001F 4F            [ 4]  102 	ld	c, a
   0020 DD 7E 09      [19]  103 	ld	a, 9 (ix)
   0023 CE 00         [ 7]  104 	adc	a, #0x00
   0025 47            [ 4]  105 	ld	b, a
   0026 79            [ 4]  106 	ld	a, c
   0027 D6 18         [ 7]  107 	sub	a, #0x18
   0029 78            [ 4]  108 	ld	a, b
   002A 17            [ 4]  109 	rla
   002B 3F            [ 4]  110 	ccf
   002C 1F            [ 4]  111 	rra
   002D DE 80         [ 7]  112 	sbc	a, #0x80
   002F 38 0E         [12]  113 	jr	C,00101$
                            114 ;src/blocks.c:68: W_2_S_Y(at_y) > BRICKS_MAP_PIXEL_BOTTOM_SCR)
   0031 3E 88         [ 7]  115 	ld	a, #0x88
   0033 B9            [ 4]  116 	cp	a, c
   0034 3E 00         [ 7]  117 	ld	a, #0x00
   0036 98            [ 4]  118 	sbc	a, b
   0037 E2r3Cr00      [10]  119 	jp	PO, 00124$
   003A EE 80         [ 7]  120 	xor	a, #0x80
   003C                     121 00124$:
   003C F2r44r00      [10]  122 	jp	P, 00102$
   003F                     123 00101$:
                            124 ;src/blocks.c:70: return BOUNCE_NONE;
   003F 2E 00         [ 7]  125 	ld	l, #0x00
   0041 C3rE4r00      [10]  126 	jp	00112$
   0044                     127 00102$:
                            128 ;src/blocks.c:73: if (ball->dy < 0)
   0044 DD 4E 04      [19]  129 	ld	c,4 (ix)
   0047 DD 46 05      [19]  130 	ld	b,5 (ix)
   004A C5            [11]  131 	push	bc
   004B FD E1         [14]  132 	pop	iy
   004D FD 66 0C      [19]  133 	ld	h, 12 (iy)
                            134 ;src/blocks.c:77: bounces |= is_ball_colliding_with_block(ball, at_x + 3, at_y, BOUNCE_Y);
   0050 DD 5E 06      [19]  135 	ld	e,6 (ix)
   0053 DD 56 07      [19]  136 	ld	d,7 (ix)
   0056 13            [ 6]  137 	inc	de
   0057 13            [ 6]  138 	inc	de
   0058 13            [ 6]  139 	inc	de
                            140 ;src/blocks.c:73: if (ball->dy < 0)
   0059 CB 7C         [ 8]  141 	bit	7, h
   005B 28 3C         [12]  142 	jr	Z,00105$
                            143 ;src/blocks.c:76: bounces |= is_ball_colliding_with_block(ball, at_x, at_y, BOUNCE_Y);
   005D D5            [11]  144 	push	de
   005E 3E 02         [ 7]  145 	ld	a, #0x02
   0060 F5            [11]  146 	push	af
   0061 33            [ 6]  147 	inc	sp
   0062 DD 6E 08      [19]  148 	ld	l,8 (ix)
   0065 DD 66 09      [19]  149 	ld	h,9 (ix)
   0068 E5            [11]  150 	push	hl
   0069 DD 6E 06      [19]  151 	ld	l,6 (ix)
   006C DD 66 07      [19]  152 	ld	h,7 (ix)
   006F E5            [11]  153 	push	hl
   0070 C5            [11]  154 	push	bc
   0071 CDrE9r00      [17]  155 	call	_is_ball_colliding_with_block
   0074 F1            [10]  156 	pop	af
   0075 F1            [10]  157 	pop	af
   0076 F1            [10]  158 	pop	af
   0077 33            [ 6]  159 	inc	sp
   0078 D1            [10]  160 	pop	de
                            161 ;src/blocks.c:77: bounces |= is_ball_colliding_with_block(ball, at_x + 3, at_y, BOUNCE_Y);
   0079 E5            [11]  162 	push	hl
   007A 3E 02         [ 7]  163 	ld	a, #0x02
   007C F5            [11]  164 	push	af
   007D 33            [ 6]  165 	inc	sp
   007E DD 4E 08      [19]  166 	ld	c,8 (ix)
   0081 DD 46 09      [19]  167 	ld	b,9 (ix)
   0084 C5            [11]  168 	push	bc
   0085 D5            [11]  169 	push	de
   0086 DD 4E 04      [19]  170 	ld	c,4 (ix)
   0089 DD 46 05      [19]  171 	ld	b,5 (ix)
   008C C5            [11]  172 	push	bc
   008D CDrE9r00      [17]  173 	call	_is_ball_colliding_with_block
   0090 F1            [10]  174 	pop	af
   0091 F1            [10]  175 	pop	af
   0092 F1            [10]  176 	pop	af
   0093 33            [ 6]  177 	inc	sp
   0094 7D            [ 4]  178 	ld	a, l
   0095 E1            [10]  179 	pop	hl
   0096 B5            [ 4]  180 	or	a, l
   0097 18 4A         [12]  181 	jr	00111$
   0099                     182 00105$:
                            183 ;src/blocks.c:82: bounces |= is_ball_colliding_with_block(ball, at_x, at_y + 6, BOUNCE_Y);
   0099 DD 7E 08      [19]  184 	ld	a, 8 (ix)
   009C C6 06         [ 7]  185 	add	a, #0x06
   009E DD 77 FE      [19]  186 	ld	-2 (ix), a
   00A1 DD 7E 09      [19]  187 	ld	a, 9 (ix)
   00A4 CE 00         [ 7]  188 	adc	a, #0x00
   00A6 DD 77 FF      [19]  189 	ld	-1 (ix), a
   00A9 D5            [11]  190 	push	de
   00AA 3E 02         [ 7]  191 	ld	a, #0x02
   00AC F5            [11]  192 	push	af
   00AD 33            [ 6]  193 	inc	sp
   00AE DD 6E FE      [19]  194 	ld	l,-2 (ix)
   00B1 DD 66 FF      [19]  195 	ld	h,-1 (ix)
   00B4 E5            [11]  196 	push	hl
   00B5 DD 6E 06      [19]  197 	ld	l,6 (ix)
   00B8 DD 66 07      [19]  198 	ld	h,7 (ix)
   00BB E5            [11]  199 	push	hl
   00BC C5            [11]  200 	push	bc
   00BD CDrE9r00      [17]  201 	call	_is_ball_colliding_with_block
   00C0 F1            [10]  202 	pop	af
   00C1 F1            [10]  203 	pop	af
   00C2 F1            [10]  204 	pop	af
   00C3 33            [ 6]  205 	inc	sp
   00C4 D1            [10]  206 	pop	de
                            207 ;src/blocks.c:83: bounces |= is_ball_colliding_with_block(ball, at_x + 3, at_y + 6, BOUNCE_Y);
   00C5 E5            [11]  208 	push	hl
   00C6 3E 02         [ 7]  209 	ld	a, #0x02
   00C8 F5            [11]  210 	push	af
   00C9 33            [ 6]  211 	inc	sp
   00CA DD 4E FE      [19]  212 	ld	c,-2 (ix)
   00CD DD 46 FF      [19]  213 	ld	b,-1 (ix)
   00D0 C5            [11]  214 	push	bc
   00D1 D5            [11]  215 	push	de
   00D2 DD 4E 04      [19]  216 	ld	c,4 (ix)
   00D5 DD 46 05      [19]  217 	ld	b,5 (ix)
   00D8 C5            [11]  218 	push	bc
   00D9 CDrE9r00      [17]  219 	call	_is_ball_colliding_with_block
   00DC F1            [10]  220 	pop	af
   00DD F1            [10]  221 	pop	af
   00DE F1            [10]  222 	pop	af
   00DF 33            [ 6]  223 	inc	sp
   00E0 7D            [ 4]  224 	ld	a, l
   00E1 E1            [10]  225 	pop	hl
   00E2 B5            [ 4]  226 	or	a, l
                            227 ;src/blocks.c:98: bounces |= is_ball_colliding_with_block(ball, at_x + 3, at_y + 6, BOUNCE_X);
   00E3                     228 00111$:
                            229 ;src/blocks.c:102: return bounces;
   00E3 6F            [ 4]  230 	ld	l, a
   00E4                     231 00112$:
   00E4 DD F9         [10]  232 	ld	sp, ix
   00E6 DD E1         [14]  233 	pop	ix
   00E8 C9            [10]  234 	ret
                            235 ;src/blocks.c:109: BounceHits is_ball_colliding_with_block(Ball *ball, i16 wx, i16 wy, BounceHits bounceType)
                            236 ;	---------------------------------
                            237 ; Function is_ball_colliding_with_block
                            238 ; ---------------------------------
   00E9                     239 _is_ball_colliding_with_block::
   00E9 DD E5         [15]  240 	push	ix
   00EB DD 21 00 00   [14]  241 	ld	ix,#0
   00EF DD 39         [15]  242 	add	ix,sp
   00F1 F5            [11]  243 	push	af
                            244 ;src/blocks.c:111: BounceHits bounces = BOUNCE_NONE;
   00F2 2E 00         [ 7]  245 	ld	l, #0x00
                            246 ;src/blocks.c:114: meta = get_metaData_at(wx, wy);
   00F4 E5            [11]  247 	push	hl
   00F5 DD 4E 08      [19]  248 	ld	c,8 (ix)
   00F8 DD 46 09      [19]  249 	ld	b,9 (ix)
   00FB C5            [11]  250 	push	bc
   00FC DD 4E 06      [19]  251 	ld	c,6 (ix)
   00FF DD 46 07      [19]  252 	ld	b,7 (ix)
   0102 C5            [11]  253 	push	bc
   0103 CDr93r01      [17]  254 	call	_get_metaData_at
   0106 F1            [10]  255 	pop	af
   0107 F1            [10]  256 	pop	af
   0108 EB            [ 4]  257 	ex	de,hl
   0109 E1            [10]  258 	pop	hl
                            259 ;src/blocks.c:115: if (meta)
   010A 7A            [ 4]  260 	ld	a, d
   010B B3            [ 4]  261 	or	a,e
   010C CAr8Er01      [10]  262 	jp	Z, 00107$
                            263 ;src/blocks.c:117: if (meta->remaining_hits != INDESTRUCTABLE)
   010F 6B            [ 4]  264 	ld	l, e
   0110 62            [ 4]  265 	ld	h, d
   0111 23            [ 6]  266 	inc	hl
   0112 23            [ 6]  267 	inc	hl
   0113 23            [ 6]  268 	inc	hl
   0114 4E            [ 7]  269 	ld	c, (hl)
   0115 79            [ 4]  270 	ld	a, c
   0116 3C            [ 4]  271 	inc	a
   0117 28 72         [12]  272 	jr	Z,00105$
                            273 ;src/blocks.c:119: if (meta->remaining_hits > 1)
   0119 3E 01         [ 7]  274 	ld	a, #0x01
   011B 91            [ 4]  275 	sub	a, c
   011C 30 04         [12]  276 	jr	NC,00102$
                            277 ;src/blocks.c:121: meta->remaining_hits -= 1;
   011E 0D            [ 4]  278 	dec	c
   011F 71            [ 7]  279 	ld	(hl), c
   0120 18 69         [12]  280 	jr	00105$
   0122                     281 00102$:
                            282 ;src/blocks.c:125: meta->remaining_hits = 0;
   0122 36 00         [10]  283 	ld	(hl), #0x00
                            284 ;src/blocks.c:126: meta->is_active = 0;
   0124 AF            [ 4]  285 	xor	a, a
   0125 12            [ 7]  286 	ld	(de), a
                            287 ;src/blocks.c:127: blocks_remaining -= 1;
   0126 2Ar44r04      [16]  288 	ld	hl, (_blocks_remaining)
   0129 2B            [ 6]  289 	dec	hl
   012A 22r44r04      [16]  290 	ld	(_blocks_remaining), hl
                            291 ;src/blocks.c:128: current_score += meta->score;
   012D 6B            [ 4]  292 	ld	l, e
   012E 62            [ 4]  293 	ld	h, d
   012F 23            [ 6]  294 	inc	hl
   0130 23            [ 6]  295 	inc	hl
   0131 4E            [ 7]  296 	ld	c, (hl)
   0132 06 00         [ 7]  297 	ld	b, #0x00
   0134 21r00r00      [10]  298 	ld	hl, #_current_score
   0137 7E            [ 7]  299 	ld	a, (hl)
   0138 81            [ 4]  300 	add	a, c
   0139 77            [ 7]  301 	ld	(hl), a
   013A 23            [ 6]  302 	inc	hl
   013B 7E            [ 7]  303 	ld	a, (hl)
   013C 88            [ 4]  304 	adc	a, b
   013D 77            [ 7]  305 	ld	(hl), a
                            306 ;src/blocks.c:133: BRICKS_MAP_PIXEL_TOP_SCR + (meta->block_tile_y * TILE_H));
   013E 21 05 00      [10]  307 	ld	hl, #0x0005
   0141 19            [11]  308 	add	hl,de
   0142 E3            [19]  309 	ex	(sp), hl
   0143 E1            [10]  310 	pop	hl
   0144 E5            [11]  311 	push	hl
   0145 7E            [ 7]  312 	ld	a, (hl)
   0146 87            [ 4]  313 	add	a, a
   0147 87            [ 4]  314 	add	a, a
   0148 C6 18         [ 7]  315 	add	a, #0x18
   014A 47            [ 4]  316 	ld	b, a
                            317 ;src/blocks.c:132: W_2_S_X(meta->block_tile_x * TILE_W),
   014B 13            [ 6]  318 	inc	de
   014C 13            [ 6]  319 	inc	de
   014D 13            [ 6]  320 	inc	de
   014E 13            [ 6]  321 	inc	de
   014F 1A            [ 7]  322 	ld	a, (de)
   0150 87            [ 4]  323 	add	a, a
   0151 C6 0C         [ 7]  324 	add	a, #0x0c
                            325 ;src/blocks.c:131: pvm = cpct_getScreenPtr(CPCT_VMEM_START,
   0153 D5            [11]  326 	push	de
   0154 C5            [11]  327 	push	bc
   0155 33            [ 6]  328 	inc	sp
   0156 F5            [11]  329 	push	af
   0157 33            [ 6]  330 	inc	sp
   0158 21 00 C0      [10]  331 	ld	hl, #0xc000
   015B E5            [11]  332 	push	hl
   015C CDr00r00      [17]  333 	call	_cpct_getScreenPtr
   015F 01 04 08      [10]  334 	ld	bc, #0x0804
   0162 C5            [11]  335 	push	bc
   0163 01 00 00      [10]  336 	ld	bc, #0x0000
   0166 C5            [11]  337 	push	bc
   0167 E5            [11]  338 	push	hl
   0168 CDr00r00      [17]  339 	call	_cpct_drawSolidBox
   016B D1            [10]  340 	pop	de
                            341 ;src/blocks.c:138: meta->block_tile_y + 6,
   016C E1            [10]  342 	pop	hl
   016D E5            [11]  343 	push	hl
   016E 4E            [ 7]  344 	ld	c, (hl)
   016F 06 00         [ 7]  345 	ld	b, #0x00
   0171 21 06 00      [10]  346 	ld	hl, #0x0006
   0174 09            [11]  347 	add	hl,bc
   0175 4D            [ 4]  348 	ld	c, l
   0176 44            [ 4]  349 	ld	b, h
                            350 ;src/blocks.c:137: background_restore_tiles_exact(meta->block_tile_x + 2,
   0177 1A            [ 7]  351 	ld	a, (de)
   0178 5F            [ 4]  352 	ld	e, a
   0179 16 00         [ 7]  353 	ld	d, #0x00
   017B 13            [ 6]  354 	inc	de
   017C 13            [ 6]  355 	inc	de
   017D 21 02 02      [10]  356 	ld	hl, #0x0202
   0180 E5            [11]  357 	push	hl
   0181 C5            [11]  358 	push	bc
   0182 D5            [11]  359 	push	de
   0183 CDr00r00      [17]  360 	call	_background_restore_tiles_exact
   0186 21 06 00      [10]  361 	ld	hl, #6
   0189 39            [11]  362 	add	hl, sp
   018A F9            [ 6]  363 	ld	sp, hl
   018B                     364 00105$:
                            365 ;src/blocks.c:150: bounces = bounceType;
   018B DD 6E 0A      [19]  366 	ld	l, 10 (ix)
   018E                     367 00107$:
                            368 ;src/blocks.c:153: return bounces;
   018E DD F9         [10]  369 	ld	sp, ix
   0190 DD E1         [14]  370 	pop	ix
   0192 C9            [10]  371 	ret
                            372 ;src/blocks.c:156: BlockMeta *get_metaData_at(i16 wx, i16 wy)
                            373 ;	---------------------------------
                            374 ; Function get_metaData_at
                            375 ; ---------------------------------
   0193                     376 _get_metaData_at::
   0193 DD E5         [15]  377 	push	ix
   0195 DD 21 00 00   [14]  378 	ld	ix,#0
   0199 DD 39         [15]  379 	add	ix,sp
                            380 ;src/blocks.c:164: tx = (wx / 2);
   019B DD 5E 04      [19]  381 	ld	e,4 (ix)
   019E DD 56 05      [19]  382 	ld	d,5 (ix)
   01A1 CB 7A         [ 8]  383 	bit	7, d
   01A3 28 01         [12]  384 	jr	Z,00108$
   01A5 13            [ 6]  385 	inc	de
   01A6                     386 00108$:
   01A6 CB 2A         [ 8]  387 	sra	d
   01A8 CB 1B         [ 8]  388 	rr	e
                            389 ;src/blocks.c:168: ty = ((wy) / 4) - 4;
   01AA DD 4E 06      [19]  390 	ld	c,6 (ix)
   01AD DD 46 07      [19]  391 	ld	b,7 (ix)
   01B0 CB 78         [ 8]  392 	bit	7, b
   01B2 28 03         [12]  393 	jr	Z,00109$
   01B4 03            [ 6]  394 	inc	bc
   01B5 03            [ 6]  395 	inc	bc
   01B6 03            [ 6]  396 	inc	bc
   01B7                     397 00109$:
   01B7 CB 28         [ 8]  398 	sra	b
   01B9 CB 19         [ 8]  399 	rr	c
   01BB CB 28         [ 8]  400 	sra	b
   01BD CB 19         [ 8]  401 	rr	c
   01BF 79            [ 4]  402 	ld	a, c
   01C0 C6 FC         [ 7]  403 	add	a, #0xfc
   01C2 6F            [ 4]  404 	ld	l, a
   01C3 78            [ 4]  405 	ld	a, b
   01C4 CE FF         [ 7]  406 	adc	a, #0xff
   01C6 67            [ 4]  407 	ld	h, a
                            408 ;src/blocks.c:172: mx = tx / 2;
   01C7 4B            [ 4]  409 	ld	c, e
   01C8 42            [ 4]  410 	ld	b, d
   01C9 CB 7A         [ 8]  411 	bit	7, d
   01CB 28 03         [12]  412 	jr	Z,00110$
   01CD 4B            [ 4]  413 	ld	c, e
   01CE 42            [ 4]  414 	ld	b, d
   01CF 03            [ 6]  415 	inc	bc
   01D0                     416 00110$:
   01D0 CB 28         [ 8]  417 	sra	b
   01D2 CB 19         [ 8]  418 	rr	c
                            419 ;src/blocks.c:173: my = ty / 2;
   01D4 5D            [ 4]  420 	ld	e, l
   01D5 54            [ 4]  421 	ld	d, h
   01D6 CB 7C         [ 8]  422 	bit	7, h
   01D8 28 02         [12]  423 	jr	Z,00111$
   01DA EB            [ 4]  424 	ex	de,hl
   01DB 13            [ 6]  425 	inc	de
   01DC                     426 00111$:
   01DC CB 2A         [ 8]  427 	sra	d
   01DE CB 1B         [ 8]  428 	rr	e
                            429 ;src/blocks.c:177: if ((mx >= BLOCKS_MAP_W / 2) || (my >= BLOCKS_MAP_H / 2))
   01E0 79            [ 4]  430 	ld	a, c
   01E1 D6 0D         [ 7]  431 	sub	a, #0x0d
   01E3 78            [ 4]  432 	ld	a, b
   01E4 17            [ 4]  433 	rla
   01E5 3F            [ 4]  434 	ccf
   01E6 1F            [ 4]  435 	rra
   01E7 DE 80         [ 7]  436 	sbc	a, #0x80
   01E9 30 0B         [12]  437 	jr	NC,00101$
   01EB 7B            [ 4]  438 	ld	a, e
   01EC D6 0E         [ 7]  439 	sub	a, #0x0e
   01EE 7A            [ 4]  440 	ld	a, d
   01EF 17            [ 4]  441 	rla
   01F0 3F            [ 4]  442 	ccf
   01F1 1F            [ 4]  443 	rra
   01F2 DE 80         [ 7]  444 	sbc	a, #0x80
   01F4 38 05         [12]  445 	jr	C,00102$
   01F6                     446 00101$:
                            447 ;src/blocks.c:179: return BOUNCE_NONE;
   01F6 21 00 00      [10]  448 	ld	hl, #0x0000
   01F9 18 1D         [12]  449 	jr	00106$
   01FB                     450 00102$:
                            451 ;src/blocks.c:182: meta = &block_meta[mx][my];
   01FB 69            [ 4]  452 	ld	l, c
   01FC 60            [ 4]  453 	ld	h, b
   01FD 29            [11]  454 	add	hl, hl
   01FE 29            [11]  455 	add	hl, hl
   01FF 09            [11]  456 	add	hl, bc
   0200 29            [11]  457 	add	hl, hl
   0201 29            [11]  458 	add	hl, hl
   0202 09            [11]  459 	add	hl, bc
   0203 29            [11]  460 	add	hl, hl
   0204 29            [11]  461 	add	hl, hl
   0205 01r00r00      [10]  462 	ld	bc,#_block_meta
   0208 09            [11]  463 	add	hl,bc
   0209 4D            [ 4]  464 	ld	c, l
   020A 44            [ 4]  465 	ld	b, h
   020B 6B            [ 4]  466 	ld	l, e
   020C 62            [ 4]  467 	ld	h, d
   020D 29            [11]  468 	add	hl, hl
   020E 19            [11]  469 	add	hl, de
   020F 29            [11]  470 	add	hl, hl
   0210 09            [11]  471 	add	hl, bc
                            472 ;src/blocks.c:183: if (meta->is_active)
   0211 7E            [ 7]  473 	ld	a, (hl)
   0212 B7            [ 4]  474 	or	a, a
                            475 ;src/blocks.c:185: return meta;
   0213 20 03         [12]  476 	jr	NZ,00106$
                            477 ;src/blocks.c:187: return NULL;
   0215 21 00 00      [10]  478 	ld	hl, #0x0000
   0218                     479 00106$:
   0218 DD E1         [14]  480 	pop	ix
   021A C9            [10]  481 	ret
                            482 ;src/blocks.c:190: void draw_current_blocks()
                            483 ;	---------------------------------
                            484 ; Function draw_current_blocks
                            485 ; ---------------------------------
   021B                     486 _draw_current_blocks::
   021B DD E5         [15]  487 	push	ix
   021D DD 21 00 00   [14]  488 	ld	ix,#0
   0221 DD 39         [15]  489 	add	ix,sp
   0223 F5            [11]  490 	push	af
   0224 3B            [ 6]  491 	dec	sp
                            492 ;src/blocks.c:192: u8 *pvmem = cpct_getScreenPtr(CPCT_VMEM_START, W_2_S_X(0),
   0225 21 0C 18      [10]  493 	ld	hl, #0x180c
   0228 E5            [11]  494 	push	hl
   0229 21 00 C0      [10]  495 	ld	hl, #0xc000
   022C E5            [11]  496 	push	hl
   022D CDr00r00      [17]  497 	call	_cpct_getScreenPtr
   0230 EB            [ 4]  498 	ex	de,hl
                            499 ;src/blocks.c:194: for (u8 y = 0; y < BLOCKS_MAP_H / 2; y++)
   0231 0E 00         [ 7]  500 	ld	c, #0x00
   0233                     501 00109$:
                            502 ;src/blocks.c:196: for (u8 x = 0; x < BLOCKS_MAP_W / 2; x++)
   0233 79            [ 4]  503 	ld	a,c
   0234 FE 0E         [ 7]  504 	cp	a,#0x0e
   0236 30 66         [12]  505 	jr	NC,00111$
   0238 87            [ 4]  506 	add	a, a
   0239 DD 77 FF      [19]  507 	ld	-1 (ix), a
   023C 79            [ 4]  508 	ld	a, c
   023D 87            [ 4]  509 	add	a, a
   023E 81            [ 4]  510 	add	a, c
   023F 87            [ 4]  511 	add	a, a
   0240 DD 77 FE      [19]  512 	ld	-2 (ix), a
   0243 06 00         [ 7]  513 	ld	b, #0x00
   0245                     514 00106$:
   0245 78            [ 4]  515 	ld	a, b
   0246 D6 0D         [ 7]  516 	sub	a, #0x0d
   0248 30 51         [12]  517 	jr	NC,00110$
                            518 ;src/blocks.c:198: BlockMeta *meta = &block_meta[x][y];
   024A D5            [11]  519 	push	de
   024B 58            [ 4]  520 	ld	e,b
   024C 16 00         [ 7]  521 	ld	d,#0x00
   024E 6B            [ 4]  522 	ld	l, e
   024F 62            [ 4]  523 	ld	h, d
   0250 29            [11]  524 	add	hl, hl
   0251 29            [11]  525 	add	hl, hl
   0252 19            [11]  526 	add	hl, de
   0253 29            [11]  527 	add	hl, hl
   0254 29            [11]  528 	add	hl, hl
   0255 19            [11]  529 	add	hl, de
   0256 29            [11]  530 	add	hl, hl
   0257 29            [11]  531 	add	hl, hl
   0258 D1            [10]  532 	pop	de
   0259 3Er00         [ 7]  533 	ld	a, #<(_block_meta)
   025B 85            [ 4]  534 	add	a, l
   025C 6F            [ 4]  535 	ld	l, a
   025D 3Es00         [ 7]  536 	ld	a, #>(_block_meta)
   025F 8C            [ 4]  537 	adc	a, h
   0260 67            [ 4]  538 	ld	h, a
   0261 7D            [ 4]  539 	ld	a, l
   0262 DD 86 FE      [19]  540 	add	a, -2 (ix)
   0265 6F            [ 4]  541 	ld	l, a
   0266 7C            [ 4]  542 	ld	a, h
   0267 CE 00         [ 7]  543 	adc	a, #0x00
   0269 67            [ 4]  544 	ld	h, a
                            545 ;src/blocks.c:200: if (meta->is_active)
   026A 7E            [ 7]  546 	ld	a, (hl)
   026B B7            [ 4]  547 	or	a, a
   026C 28 2A         [12]  548 	jr	Z,00107$
                            549 ;src/blocks.c:203: current_level->blocks_tilemap);
   026E 2Ar00r00      [16]  550 	ld	hl, (_current_level)
   0271 23            [ 6]  551 	inc	hl
   0272 23            [ 6]  552 	inc	hl
   0273 7E            [ 7]  553 	ld	a, (hl)
   0274 23            [ 6]  554 	inc	hl
   0275 66            [ 7]  555 	ld	h, (hl)
   0276 6F            [ 4]  556 	ld	l, a
                            557 ;src/blocks.c:202: cpct_etm_drawTileBox2x4(x * 2, y * 2, 2, 2, BLOCKS_MAP_W, pvmem,
   0277 D5            [11]  558 	push	de
   0278 FD E1         [14]  559 	pop	iy
   027A 78            [ 4]  560 	ld	a, b
   027B 87            [ 4]  561 	add	a, a
   027C DD 77 FD      [19]  562 	ld	-3 (ix), a
   027F C5            [11]  563 	push	bc
   0280 D5            [11]  564 	push	de
   0281 E5            [11]  565 	push	hl
   0282 FD E5         [15]  566 	push	iy
   0284 21 02 1A      [10]  567 	ld	hl, #0x1a02
   0287 E5            [11]  568 	push	hl
   0288 3E 02         [ 7]  569 	ld	a, #0x02
   028A F5            [11]  570 	push	af
   028B 33            [ 6]  571 	inc	sp
   028C DD 66 FF      [19]  572 	ld	h, -1 (ix)
   028F DD 6E FD      [19]  573 	ld	l, -3 (ix)
   0292 E5            [11]  574 	push	hl
   0293 CDr00r00      [17]  575 	call	_cpct_etm_drawTileBox2x4
   0296 D1            [10]  576 	pop	de
   0297 C1            [10]  577 	pop	bc
   0298                     578 00107$:
                            579 ;src/blocks.c:196: for (u8 x = 0; x < BLOCKS_MAP_W / 2; x++)
   0298 04            [ 4]  580 	inc	b
   0299 18 AA         [12]  581 	jr	00106$
   029B                     582 00110$:
                            583 ;src/blocks.c:194: for (u8 y = 0; y < BLOCKS_MAP_H / 2; y++)
   029B 0C            [ 4]  584 	inc	c
   029C 18 95         [12]  585 	jr	00109$
   029E                     586 00111$:
   029E DD F9         [10]  587 	ld	sp, ix
   02A0 DD E1         [14]  588 	pop	ix
   02A2 C9            [10]  589 	ret
                            590 ;src/blocks.c:212: void map_blocks_to_meta()
                            591 ;	---------------------------------
                            592 ; Function map_blocks_to_meta
                            593 ; ---------------------------------
   02A3                     594 _map_blocks_to_meta::
   02A3 DD E5         [15]  595 	push	ix
   02A5 DD 21 00 00   [14]  596 	ld	ix,#0
   02A9 DD 39         [15]  597 	add	ix,sp
   02AB F5            [11]  598 	push	af
   02AC F5            [11]  599 	push	af
   02AD 3B            [ 6]  600 	dec	sp
                            601 ;src/blocks.c:214: blocks_remaining = 0;
   02AE 21 00 00      [10]  602 	ld	hl, #0x0000
   02B1 22r44r04      [16]  603 	ld	(_blocks_remaining), hl
                            604 ;src/blocks.c:216: for (u8 y = 0; y < BLOCKS_MAP_H; y += 2)
   02B4 DD 36 FC 00   [19]  605 	ld	-4 (ix), #0x00
   02B8                     606 00119$:
   02B8 DD 7E FC      [19]  607 	ld	a, -4 (ix)
   02BB D6 1C         [ 7]  608 	sub	a, #0x1c
   02BD D2r6Fr04      [10]  609 	jp	NC, 00121$
                            610 ;src/blocks.c:218: for (u8 x = 0; x < BLOCKS_MAP_W; x += 2)
   02C0 DD 4E FC      [19]  611 	ld	c,-4 (ix)
   02C3 06 00         [ 7]  612 	ld	b,#0x00
   02C5 69            [ 4]  613 	ld	l, c
   02C6 60            [ 4]  614 	ld	h, b
   02C7 29            [11]  615 	add	hl, hl
   02C8 09            [11]  616 	add	hl, bc
   02C9 29            [11]  617 	add	hl, hl
   02CA 29            [11]  618 	add	hl, hl
   02CB 09            [11]  619 	add	hl, bc
   02CC 29            [11]  620 	add	hl, hl
   02CD DD 75 FD      [19]  621 	ld	-3 (ix), l
   02D0 DD 74 FE      [19]  622 	ld	-2 (ix), h
   02D3 DD 4E FC      [19]  623 	ld	c, -4 (ix)
   02D6 CB 39         [ 8]  624 	srl	c
   02D8 79            [ 4]  625 	ld	a, c
   02D9 87            [ 4]  626 	add	a, a
   02DA 81            [ 4]  627 	add	a, c
   02DB 87            [ 4]  628 	add	a, a
   02DC DD 77 FF      [19]  629 	ld	-1 (ix), a
   02DF DD 36 FB 00   [19]  630 	ld	-5 (ix), #0x00
   02E3                     631 00116$:
   02E3 DD 7E FB      [19]  632 	ld	a, -5 (ix)
   02E6 D6 1A         [ 7]  633 	sub	a, #0x1a
   02E8 D2r66r04      [10]  634 	jp	NC, 00120$
                            635 ;src/blocks.c:220: u8 tile = current_level->blocks_tilemap[(y * BLOCKS_MAP_W) + x];
   02EB 2Ar00r00      [16]  636 	ld	hl, (_current_level)
   02EE 23            [ 6]  637 	inc	hl
   02EF 23            [ 6]  638 	inc	hl
   02F0 4E            [ 7]  639 	ld	c, (hl)
   02F1 23            [ 6]  640 	inc	hl
   02F2 46            [ 7]  641 	ld	b, (hl)
   02F3 DD 5E FB      [19]  642 	ld	e, -5 (ix)
   02F6 16 00         [ 7]  643 	ld	d, #0x00
   02F8 DD 6E FD      [19]  644 	ld	l,-3 (ix)
   02FB DD 66 FE      [19]  645 	ld	h,-2 (ix)
   02FE 19            [11]  646 	add	hl, de
   02FF 09            [11]  647 	add	hl, bc
   0300 7E            [ 7]  648 	ld	a, (hl)
                            649 ;src/blocks.c:221: switch (tile)
   0301 B7            [ 4]  650 	or	a, a
   0302 28 2C         [12]  651 	jr	Z,00101$
   0304 FE 02         [ 7]  652 	cp	a, #0x02
   0306 28 3F         [12]  653 	jr	Z,00102$
   0308 FE 04         [ 7]  654 	cp	a, #0x04
   030A 28 53         [12]  655 	jr	Z,00103$
   030C FE 06         [ 7]  656 	cp	a, #0x06
   030E 28 67         [12]  657 	jr	Z,00104$
   0310 FE 08         [ 7]  658 	cp	a, #0x08
   0312 28 7B         [12]  659 	jr	Z,00105$
   0314 FE 0A         [ 7]  660 	cp	a, #0x0a
   0316 CArA7r03      [10]  661 	jp	Z,00106$
   0319 FE 0C         [ 7]  662 	cp	a, #0x0c
   031B CArBFr03      [10]  663 	jp	Z,00107$
   031E FE 0E         [ 7]  664 	cp	a, #0x0e
   0320 CArD7r03      [10]  665 	jp	Z,00108$
   0323 FE 10         [ 7]  666 	cp	a, #0x10
   0325 CArEEr03      [10]  667 	jp	Z,00109$
   0328 D6 12         [ 7]  668 	sub	a, #0x12
   032A CAr11r04      [10]  669 	jp	Z,00110$
   032D C3r28r04      [10]  670 	jp	00111$
                            671 ;src/blocks.c:223: case WHITE_BLOCK:
   0330                     672 00101$:
                            673 ;src/blocks.c:224: plant_tile_meta(x, y, WHITE_BLOCK, WHITE_SCORE, SINGLE_HIT_TO_REMOVE);
   0330 21 05 01      [10]  674 	ld	hl, #0x0105
   0333 E5            [11]  675 	push	hl
   0334 AF            [ 4]  676 	xor	a, a
   0335 F5            [11]  677 	push	af
   0336 33            [ 6]  678 	inc	sp
   0337 DD 66 FC      [19]  679 	ld	h, -4 (ix)
   033A DD 6E FB      [19]  680 	ld	l, -5 (ix)
   033D E5            [11]  681 	push	hl
   033E CDr74r04      [17]  682 	call	_plant_tile_meta
   0341 F1            [10]  683 	pop	af
   0342 F1            [10]  684 	pop	af
   0343 33            [ 6]  685 	inc	sp
                            686 ;src/blocks.c:225: break;
   0344 C3r5Dr04      [10]  687 	jp	00117$
                            688 ;src/blocks.c:226: case ORANGE_BLOCK:
   0347                     689 00102$:
                            690 ;src/blocks.c:227: plant_tile_meta(x, y, ORANGE_BLOCK, ORANGE_SCORE, SINGLE_HIT_TO_REMOVE);
   0347 21 06 01      [10]  691 	ld	hl, #0x0106
   034A E5            [11]  692 	push	hl
   034B 3E 02         [ 7]  693 	ld	a, #0x02
   034D F5            [11]  694 	push	af
   034E 33            [ 6]  695 	inc	sp
   034F DD 66 FC      [19]  696 	ld	h, -4 (ix)
   0352 DD 6E FB      [19]  697 	ld	l, -5 (ix)
   0355 E5            [11]  698 	push	hl
   0356 CDr74r04      [17]  699 	call	_plant_tile_meta
   0359 F1            [10]  700 	pop	af
   035A F1            [10]  701 	pop	af
   035B 33            [ 6]  702 	inc	sp
                            703 ;src/blocks.c:228: break;
   035C C3r5Dr04      [10]  704 	jp	00117$
                            705 ;src/blocks.c:229: case CYAN_BLOCK:
   035F                     706 00103$:
                            707 ;src/blocks.c:230: plant_tile_meta(x, y, CYAN_BLOCK, CYAN_SCORE, SINGLE_HIT_TO_REMOVE);
   035F 21 07 01      [10]  708 	ld	hl, #0x0107
   0362 E5            [11]  709 	push	hl
   0363 3E 04         [ 7]  710 	ld	a, #0x04
   0365 F5            [11]  711 	push	af
   0366 33            [ 6]  712 	inc	sp
   0367 DD 66 FC      [19]  713 	ld	h, -4 (ix)
   036A DD 6E FB      [19]  714 	ld	l, -5 (ix)
   036D E5            [11]  715 	push	hl
   036E CDr74r04      [17]  716 	call	_plant_tile_meta
   0371 F1            [10]  717 	pop	af
   0372 F1            [10]  718 	pop	af
   0373 33            [ 6]  719 	inc	sp
                            720 ;src/blocks.c:231: break;
   0374 C3r5Dr04      [10]  721 	jp	00117$
                            722 ;src/blocks.c:232: case GREEN_BLOCK:
   0377                     723 00104$:
                            724 ;src/blocks.c:233: plant_tile_meta(x, y, GREEN_BLOCK, GREEN_SCORE, SINGLE_HIT_TO_REMOVE);
   0377 21 08 01      [10]  725 	ld	hl, #0x0108
   037A E5            [11]  726 	push	hl
   037B 3E 06         [ 7]  727 	ld	a, #0x06
   037D F5            [11]  728 	push	af
   037E 33            [ 6]  729 	inc	sp
   037F DD 66 FC      [19]  730 	ld	h, -4 (ix)
   0382 DD 6E FB      [19]  731 	ld	l, -5 (ix)
   0385 E5            [11]  732 	push	hl
   0386 CDr74r04      [17]  733 	call	_plant_tile_meta
   0389 F1            [10]  734 	pop	af
   038A F1            [10]  735 	pop	af
   038B 33            [ 6]  736 	inc	sp
                            737 ;src/blocks.c:234: break;
   038C C3r5Dr04      [10]  738 	jp	00117$
                            739 ;src/blocks.c:235: case RED_BLOCK:
   038F                     740 00105$:
                            741 ;src/blocks.c:236: plant_tile_meta(x, y, RED_BLOCK, RED_SCORE, SINGLE_HIT_TO_REMOVE);
   038F 21 09 01      [10]  742 	ld	hl, #0x0109
   0392 E5            [11]  743 	push	hl
   0393 3E 08         [ 7]  744 	ld	a, #0x08
   0395 F5            [11]  745 	push	af
   0396 33            [ 6]  746 	inc	sp
   0397 DD 66 FC      [19]  747 	ld	h, -4 (ix)
   039A DD 6E FB      [19]  748 	ld	l, -5 (ix)
   039D E5            [11]  749 	push	hl
   039E CDr74r04      [17]  750 	call	_plant_tile_meta
   03A1 F1            [10]  751 	pop	af
   03A2 F1            [10]  752 	pop	af
   03A3 33            [ 6]  753 	inc	sp
                            754 ;src/blocks.c:237: break;
   03A4 C3r5Dr04      [10]  755 	jp	00117$
                            756 ;src/blocks.c:238: case BLUE_BLOCK:
   03A7                     757 00106$:
                            758 ;src/blocks.c:239: plant_tile_meta(x, y, BLUE_BLOCK, BLUE_SCORE, SINGLE_HIT_TO_REMOVE);
   03A7 21 0A 01      [10]  759 	ld	hl, #0x010a
   03AA E5            [11]  760 	push	hl
   03AB 3E 0A         [ 7]  761 	ld	a, #0x0a
   03AD F5            [11]  762 	push	af
   03AE 33            [ 6]  763 	inc	sp
   03AF DD 66 FC      [19]  764 	ld	h, -4 (ix)
   03B2 DD 6E FB      [19]  765 	ld	l, -5 (ix)
   03B5 E5            [11]  766 	push	hl
   03B6 CDr74r04      [17]  767 	call	_plant_tile_meta
   03B9 F1            [10]  768 	pop	af
   03BA F1            [10]  769 	pop	af
   03BB 33            [ 6]  770 	inc	sp
                            771 ;src/blocks.c:240: break;
   03BC C3r5Dr04      [10]  772 	jp	00117$
                            773 ;src/blocks.c:241: case MAGENTA_BLOCK:
   03BF                     774 00107$:
                            775 ;src/blocks.c:242: plant_tile_meta(x, y, MAGENTA_BLOCK, MAGENTA_SCORE, SINGLE_HIT_TO_REMOVE);
   03BF 21 0B 01      [10]  776 	ld	hl, #0x010b
   03C2 E5            [11]  777 	push	hl
   03C3 3E 0C         [ 7]  778 	ld	a, #0x0c
   03C5 F5            [11]  779 	push	af
   03C6 33            [ 6]  780 	inc	sp
   03C7 DD 66 FC      [19]  781 	ld	h, -4 (ix)
   03CA DD 6E FB      [19]  782 	ld	l, -5 (ix)
   03CD E5            [11]  783 	push	hl
   03CE CDr74r04      [17]  784 	call	_plant_tile_meta
   03D1 F1            [10]  785 	pop	af
   03D2 F1            [10]  786 	pop	af
   03D3 33            [ 6]  787 	inc	sp
                            788 ;src/blocks.c:243: break;
   03D4 C3r5Dr04      [10]  789 	jp	00117$
                            790 ;src/blocks.c:244: case YELLOW_BLOCK:
   03D7                     791 00108$:
                            792 ;src/blocks.c:245: plant_tile_meta(x, y, YELLOW_BLOCK, YELLOW_SCORE, SINGLE_HIT_TO_REMOVE);
   03D7 21 0C 01      [10]  793 	ld	hl, #0x010c
   03DA E5            [11]  794 	push	hl
   03DB 3E 0E         [ 7]  795 	ld	a, #0x0e
   03DD F5            [11]  796 	push	af
   03DE 33            [ 6]  797 	inc	sp
   03DF DD 66 FC      [19]  798 	ld	h, -4 (ix)
   03E2 DD 6E FB      [19]  799 	ld	l, -5 (ix)
   03E5 E5            [11]  800 	push	hl
   03E6 CDr74r04      [17]  801 	call	_plant_tile_meta
   03E9 F1            [10]  802 	pop	af
   03EA F1            [10]  803 	pop	af
   03EB 33            [ 6]  804 	inc	sp
                            805 ;src/blocks.c:246: break;
   03EC 18 6F         [12]  806 	jr	00117$
                            807 ;src/blocks.c:247: case STEEL_BLOCK:
   03EE                     808 00109$:
                            809 ;src/blocks.c:250: current_level->steel_hits_to_destroy);
   03EE 2Ar00r00      [16]  810 	ld	hl, (_current_level)
   03F1 11 05 00      [10]  811 	ld	de, #0x0005
   03F4 19            [11]  812 	add	hl, de
   03F5 56            [ 7]  813 	ld	d, (hl)
                            814 ;src/blocks.c:249: current_level->steel_score,
   03F6 FD 2Ar00r00   [20]  815 	ld	iy, (_current_level)
                            816 ;src/blocks.c:248: plant_tile_meta(x, y, STEEL_BLOCK,
   03FA FD 5E 04      [19]  817 	ld	e, 4 (iy)
   03FD D5            [11]  818 	push	de
   03FE 3E 10         [ 7]  819 	ld	a, #0x10
   0400 F5            [11]  820 	push	af
   0401 33            [ 6]  821 	inc	sp
   0402 DD 66 FC      [19]  822 	ld	h, -4 (ix)
   0405 DD 6E FB      [19]  823 	ld	l, -5 (ix)
   0408 E5            [11]  824 	push	hl
   0409 CDr74r04      [17]  825 	call	_plant_tile_meta
   040C F1            [10]  826 	pop	af
   040D F1            [10]  827 	pop	af
   040E 33            [ 6]  828 	inc	sp
                            829 ;src/blocks.c:251: break;
   040F 18 4C         [12]  830 	jr	00117$
                            831 ;src/blocks.c:252: case GOLD_BLOCK:
   0411                     832 00110$:
                            833 ;src/blocks.c:253: plant_tile_meta(x, y, GOLD_BLOCK, 0, INDESTRUCTABLE);
   0411 21 00 FF      [10]  834 	ld	hl, #0xff00
   0414 E5            [11]  835 	push	hl
   0415 3E 12         [ 7]  836 	ld	a, #0x12
   0417 F5            [11]  837 	push	af
   0418 33            [ 6]  838 	inc	sp
   0419 DD 66 FC      [19]  839 	ld	h, -4 (ix)
   041C DD 6E FB      [19]  840 	ld	l, -5 (ix)
   041F E5            [11]  841 	push	hl
   0420 CDr74r04      [17]  842 	call	_plant_tile_meta
   0423 F1            [10]  843 	pop	af
   0424 F1            [10]  844 	pop	af
   0425 33            [ 6]  845 	inc	sp
                            846 ;src/blocks.c:254: break;
   0426 18 35         [12]  847 	jr	00117$
                            848 ;src/blocks.c:255: default:
   0428                     849 00111$:
                            850 ;src/blocks.c:257: block_meta[x / 2][y / 2].is_active = 0;
   0428 DD 4E FB      [19]  851 	ld	c, -5 (ix)
   042B CB 39         [ 8]  852 	srl	c
   042D 06 00         [ 7]  853 	ld	b,#0x00
   042F 69            [ 4]  854 	ld	l, c
   0430 60            [ 4]  855 	ld	h, b
   0431 29            [11]  856 	add	hl, hl
   0432 29            [11]  857 	add	hl, hl
   0433 09            [11]  858 	add	hl, bc
   0434 29            [11]  859 	add	hl, hl
   0435 29            [11]  860 	add	hl, hl
   0436 09            [11]  861 	add	hl, bc
   0437 29            [11]  862 	add	hl, hl
   0438 29            [11]  863 	add	hl, hl
   0439 01r00r00      [10]  864 	ld	bc,#_block_meta
   043C 09            [11]  865 	add	hl,bc
   043D 4D            [ 4]  866 	ld	c, l
   043E 44            [ 4]  867 	ld	b, h
   043F DD 6E FF      [19]  868 	ld	l,-1 (ix)
   0442 26 00         [ 7]  869 	ld	h,#0x00
   0444 09            [11]  870 	add	hl, bc
   0445 36 00         [10]  871 	ld	(hl), #0x00
                            872 ;src/blocks.c:258: block_meta[x / 2][y / 2].score = 0;
   0447 DD 7E FF      [19]  873 	ld	a, -1 (ix)
   044A 81            [ 4]  874 	add	a, c
   044B 4F            [ 4]  875 	ld	c, a
   044C 3E 00         [ 7]  876 	ld	a, #0x00
   044E 88            [ 4]  877 	adc	a, b
   044F 47            [ 4]  878 	ld	b, a
   0450 59            [ 4]  879 	ld	e, c
   0451 50            [ 4]  880 	ld	d, b
   0452 13            [ 6]  881 	inc	de
   0453 13            [ 6]  882 	inc	de
   0454 AF            [ 4]  883 	xor	a, a
   0455 12            [ 7]  884 	ld	(de), a
                            885 ;src/blocks.c:259: block_meta[x / 2][y / 2].remaining_hits = 0;
   0456 03            [ 6]  886 	inc	bc
   0457 03            [ 6]  887 	inc	bc
   0458 03            [ 6]  888 	inc	bc
   0459 60            [ 4]  889 	ld	h, b
   045A 69            [ 4]  890 	ld	l, c
   045B 36 00         [10]  891 	ld	(hl), #0x00
                            892 ;src/blocks.c:262: }
   045D                     893 00117$:
                            894 ;src/blocks.c:218: for (u8 x = 0; x < BLOCKS_MAP_W; x += 2)
   045D DD 34 FB      [23]  895 	inc	-5 (ix)
   0460 DD 34 FB      [23]  896 	inc	-5 (ix)
   0463 C3rE3r02      [10]  897 	jp	00116$
   0466                     898 00120$:
                            899 ;src/blocks.c:216: for (u8 y = 0; y < BLOCKS_MAP_H; y += 2)
   0466 DD 34 FC      [23]  900 	inc	-4 (ix)
   0469 DD 34 FC      [23]  901 	inc	-4 (ix)
   046C C3rB8r02      [10]  902 	jp	00119$
   046F                     903 00121$:
   046F DD F9         [10]  904 	ld	sp, ix
   0471 DD E1         [14]  905 	pop	ix
   0473 C9            [10]  906 	ret
                            907 ;src/blocks.c:267: void plant_tile_meta(u8 map_x, u8 map_y, u8 tile_type, u8 score, u8 hits_to_destroy)
                            908 ;	---------------------------------
                            909 ; Function plant_tile_meta
                            910 ; ---------------------------------
   0474                     911 _plant_tile_meta::
   0474 DD E5         [15]  912 	push	ix
   0476 DD 21 00 00   [14]  913 	ld	ix,#0
   047A DD 39         [15]  914 	add	ix,sp
                            915 ;src/blocks.c:269: if (hits_to_destroy != INDESTRUCTABLE)
   047C DD 7E 08      [19]  916 	ld	a, 8 (ix)
   047F 3C            [ 4]  917 	inc	a
   0480 28 0C         [12]  918 	jr	Z,00102$
                            919 ;src/blocks.c:271: blocks_remaining += 1;
   0482 FD 21r44r04   [14]  920 	ld	iy, #_blocks_remaining
   0486 FD 34 00      [23]  921 	inc	0 (iy)
   0489 20 03         [12]  922 	jr	NZ,00110$
   048B FD 34 01      [23]  923 	inc	1 (iy)
   048E                     924 00110$:
   048E                     925 00102$:
                            926 ;src/blocks.c:274: block_meta[map_x / 2][map_y / 2].is_active = 1;
   048E 01r00r00      [10]  927 	ld	bc, #_block_meta+0
   0491 DD 5E 04      [19]  928 	ld	e, 4 (ix)
   0494 CB 3B         [ 8]  929 	srl	e
   0496 16 00         [ 7]  930 	ld	d,#0x00
   0498 6B            [ 4]  931 	ld	l, e
   0499 62            [ 4]  932 	ld	h, d
   049A 29            [11]  933 	add	hl, hl
   049B 29            [11]  934 	add	hl, hl
   049C 19            [11]  935 	add	hl, de
   049D 29            [11]  936 	add	hl, hl
   049E 29            [11]  937 	add	hl, hl
   049F 19            [11]  938 	add	hl, de
   04A0 29            [11]  939 	add	hl, hl
   04A1 29            [11]  940 	add	hl, hl
   04A2 09            [11]  941 	add	hl,bc
   04A3 4D            [ 4]  942 	ld	c, l
   04A4 44            [ 4]  943 	ld	b, h
   04A5 DD 5E 05      [19]  944 	ld	e, 5 (ix)
   04A8 CB 3B         [ 8]  945 	srl	e
   04AA 6B            [ 4]  946 	ld	l, e
   04AB 29            [11]  947 	add	hl, hl
   04AC 19            [11]  948 	add	hl, de
   04AD 29            [11]  949 	add	hl, hl
   04AE 7D            [ 4]  950 	ld	a, l
   04AF 81            [ 4]  951 	add	a, c
   04B0 4F            [ 4]  952 	ld	c, a
   04B1 3E 00         [ 7]  953 	ld	a, #0x00
   04B3 88            [ 4]  954 	adc	a, b
   04B4 47            [ 4]  955 	ld	b, a
   04B5 3E 01         [ 7]  956 	ld	a, #0x01
   04B7 02            [ 7]  957 	ld	(bc), a
                            958 ;src/blocks.c:275: block_meta[map_x / 2][map_y / 2].score = score;
   04B8 59            [ 4]  959 	ld	e, c
   04B9 50            [ 4]  960 	ld	d, b
   04BA 13            [ 6]  961 	inc	de
   04BB 13            [ 6]  962 	inc	de
   04BC DD 7E 07      [19]  963 	ld	a, 7 (ix)
   04BF 12            [ 7]  964 	ld	(de), a
                            965 ;src/blocks.c:276: block_meta[map_x / 2][map_y / 2].remaining_hits = hits_to_destroy;
   04C0 59            [ 4]  966 	ld	e, c
   04C1 50            [ 4]  967 	ld	d, b
   04C2 13            [ 6]  968 	inc	de
   04C3 13            [ 6]  969 	inc	de
   04C4 13            [ 6]  970 	inc	de
   04C5 DD 7E 08      [19]  971 	ld	a, 8 (ix)
   04C8 12            [ 7]  972 	ld	(de), a
                            973 ;src/blocks.c:277: block_meta[map_x / 2][map_y / 2].type = tile_type;
   04C9 59            [ 4]  974 	ld	e, c
   04CA 50            [ 4]  975 	ld	d, b
   04CB 13            [ 6]  976 	inc	de
   04CC DD 7E 06      [19]  977 	ld	a, 6 (ix)
   04CF 12            [ 7]  978 	ld	(de), a
                            979 ;src/blocks.c:278: block_meta[map_x / 2][map_y / 2].block_tile_x = map_x;
   04D0 21 04 00      [10]  980 	ld	hl, #0x0004
   04D3 09            [11]  981 	add	hl, bc
   04D4 DD 7E 04      [19]  982 	ld	a, 4 (ix)
   04D7 77            [ 7]  983 	ld	(hl), a
                            984 ;src/blocks.c:279: block_meta[map_x / 2][map_y / 2].block_tile_y = map_y;
   04D8 21 05 00      [10]  985 	ld	hl, #0x0005
   04DB 09            [11]  986 	add	hl, bc
   04DC DD 7E 05      [19]  987 	ld	a, 5 (ix)
   04DF 77            [ 7]  988 	ld	(hl), a
   04E0 DD E1         [14]  989 	pop	ix
   04E2 C9            [10]  990 	ret
                            991 	.area _CODE
                            992 	.area _INITIALIZER
                            993 	.area _CABS (ABS)
