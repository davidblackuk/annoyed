                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.6.8 #9946 (Linux)
                              4 ;--------------------------------------------------------
                              5 	.module blocks
                              6 	.optsdcc -mz80
                              7 	
                              8 ;--------------------------------------------------------
                              9 ; Public variables in this module
                             10 ;--------------------------------------------------------
                             11 	.globl _background_debug_box_wc
                             12 	.globl _cpct_etm_drawTileBox2x4
                             13 	.globl _cpct_getScreenPtr
                             14 	.globl _block_meta
                             15 	.globl _blocks_initialize
                             16 	.globl _blocks_draw
                             17 	.globl _blocks_restore_background
                             18 	.globl _blocks_bounce_ball
                             19 	.globl _is_ball_colliding_with_block
                             20 	.globl _get_metaData_at
                             21 	.globl _draw_current_blocks
                             22 	.globl _map_blocks_to_meta
                             23 	.globl _plant_tile_meta
                             24 ;--------------------------------------------------------
                             25 ; special function registers
                             26 ;--------------------------------------------------------
                             27 ;--------------------------------------------------------
                             28 ; ram data
                             29 ;--------------------------------------------------------
                             30 	.area _DATA
   0000                      31 _block_meta::
   0000                      32 	.ds 1092
                             33 ;--------------------------------------------------------
                             34 ; ram data
                             35 ;--------------------------------------------------------
                             36 	.area _INITIALIZED
                             37 ;--------------------------------------------------------
                             38 ; absolute external ram data
                             39 ;--------------------------------------------------------
                             40 	.area _DABS (ABS)
                             41 ;--------------------------------------------------------
                             42 ; global & static initialisations
                             43 ;--------------------------------------------------------
                             44 	.area _HOME
                             45 	.area _GSINIT
                             46 	.area _GSFINAL
                             47 	.area _GSINIT
                             48 ;--------------------------------------------------------
                             49 ; Home
                             50 ;--------------------------------------------------------
                             51 	.area _HOME
                             52 	.area _HOME
                             53 ;--------------------------------------------------------
                             54 ; code
                             55 ;--------------------------------------------------------
                             56 	.area _CODE
                             57 ;src/blocks.c:38: void blocks_initialize(u8 is_restart)
                             58 ;	---------------------------------
                             59 ; Function blocks_initialize
                             60 ; ---------------------------------
   0000                      61 _blocks_initialize::
                             62 ;src/blocks.c:40: if (!is_restart)
   0000 21 02 00      [10]   63 	ld	hl, #2+0
   0003 39            [11]   64 	add	hl, sp
   0004 7E            [ 7]   65 	ld	a, (hl)
   0005 B7            [ 4]   66 	or	a, a
   0006 C2r82r02      [10]   67 	jp	NZ,_draw_current_blocks
                             68 ;src/blocks.c:43: map_blocks_to_meta();
   0009 CDr0Ar03      [17]   69 	call	_map_blocks_to_meta
                             70 ;src/blocks.c:48: draw_current_blocks();
   000C C3r82r02      [10]   71 	jp  _draw_current_blocks
                             72 ;src/blocks.c:51: void blocks_draw()
                             73 ;	---------------------------------
                             74 ; Function blocks_draw
                             75 ; ---------------------------------
   000F                      76 _blocks_draw::
                             77 ;src/blocks.c:53: }
   000F C9            [10]   78 	ret
                             79 ;src/blocks.c:55: void blocks_restore_background()
                             80 ;	---------------------------------
                             81 ; Function blocks_restore_background
                             82 ; ---------------------------------
   0010                      83 _blocks_restore_background::
                             84 ;src/blocks.c:57: }
   0010 C9            [10]   85 	ret
                             86 ;src/blocks.c:59: BounceHits blocks_bounce_ball(Ball *ball, i16 at_x, i16 at_y)
                             87 ;	---------------------------------
                             88 ; Function blocks_bounce_ball
                             89 ; ---------------------------------
   0011                      90 _blocks_bounce_ball::
   0011 DD E5         [15]   91 	push	ix
   0013 DD 21 00 00   [14]   92 	ld	ix,#0
   0017 DD 39         [15]   93 	add	ix,sp
   0019 F5            [11]   94 	push	af
   001A 3B            [ 6]   95 	dec	sp
                             96 ;src/blocks.c:66: if (W_2_S_Y(at_y) < BRICKS_MAP_PIXEL_TOP_SCR ||
   001B DD 7E 08      [19]   97 	ld	a, 8 (ix)
   001E C6 08         [ 7]   98 	add	a, #0x08
   0020 DD 77 FD      [19]   99 	ld	-3 (ix), a
   0023 DD 7E 09      [19]  100 	ld	a, 9 (ix)
   0026 CE 00         [ 7]  101 	adc	a, #0x00
   0028 DD 77 FE      [19]  102 	ld	-2 (ix), a
   002B DD 7E FD      [19]  103 	ld	a, -3 (ix)
   002E D6 18         [ 7]  104 	sub	a, #0x18
   0030 DD 7E FE      [19]  105 	ld	a, -2 (ix)
   0033 17            [ 4]  106 	rla
   0034 3F            [ 4]  107 	ccf
   0035 1F            [ 4]  108 	rra
   0036 DE 80         [ 7]  109 	sbc	a, #0x80
   0038 38 12         [12]  110 	jr	C,00101$
                            111 ;src/blocks.c:67: W_2_S_Y(at_y) > BRICKS_MAP_PIXEL_BOTTOM_SCR)
   003A 3E 88         [ 7]  112 	ld	a, #0x88
   003C DD BE FD      [19]  113 	cp	a, -3 (ix)
   003F 3E 00         [ 7]  114 	ld	a, #0x00
   0041 DD 9E FE      [19]  115 	sbc	a, -2 (ix)
   0044 E2r49r00      [10]  116 	jp	PO, 00124$
   0047 EE 80         [ 7]  117 	xor	a, #0x80
   0049                     118 00124$:
   0049 F2r51r00      [10]  119 	jp	P, 00102$
   004C                     120 00101$:
                            121 ;src/blocks.c:69: return BOUNCE_NONE;
   004C 2E 00         [ 7]  122 	ld	l, #0x00
   004E C3r9Fr01      [10]  123 	jp	00110$
   0051                     124 00102$:
                            125 ;src/blocks.c:72: if (ball->dy < 0)
   0051 DD 7E 04      [19]  126 	ld	a, 4 (ix)
   0054 DD 77 FD      [19]  127 	ld	-3 (ix), a
   0057 DD 7E 05      [19]  128 	ld	a, 5 (ix)
   005A DD 77 FE      [19]  129 	ld	-2 (ix), a
   005D E1            [10]  130 	pop	hl
   005E E5            [11]  131 	push	hl
   005F 11 0B 00      [10]  132 	ld	de, #0x000b
   0062 19            [11]  133 	add	hl, de
   0063 7E            [ 7]  134 	ld	a, (hl)
   0064 23            [ 6]  135 	inc	hl
   0065 66            [ 7]  136 	ld	h, (hl)
                            137 ;src/blocks.c:76: bounces |= is_ball_colliding_with_block(ball, at_x + 3, at_y, BOUNCE_Y);
   0066 DD 4E 06      [19]  138 	ld	c,6 (ix)
   0069 DD 46 07      [19]  139 	ld	b,7 (ix)
   006C 03            [ 6]  140 	inc	bc
   006D 03            [ 6]  141 	inc	bc
   006E 03            [ 6]  142 	inc	bc
                            143 ;src/blocks.c:81: bounces |= is_ball_colliding_with_block(ball, at_x, at_y + 6, BOUNCE_Y);
   006F DD 7E 08      [19]  144 	ld	a, 8 (ix)
   0072 C6 06         [ 7]  145 	add	a, #0x06
   0074 5F            [ 4]  146 	ld	e, a
   0075 DD 7E 09      [19]  147 	ld	a, 9 (ix)
   0078 CE 00         [ 7]  148 	adc	a, #0x00
   007A 57            [ 4]  149 	ld	d, a
                            150 ;src/blocks.c:72: if (ball->dy < 0)
   007B CB 7C         [ 8]  151 	bit	7, h
   007D 28 4E         [12]  152 	jr	Z,00105$
                            153 ;src/blocks.c:75: bounces |= is_ball_colliding_with_block(ball, at_x, at_y, BOUNCE_Y);
   007F C5            [11]  154 	push	bc
   0080 D5            [11]  155 	push	de
   0081 3E 02         [ 7]  156 	ld	a, #0x02
   0083 F5            [11]  157 	push	af
   0084 33            [ 6]  158 	inc	sp
   0085 DD 6E 08      [19]  159 	ld	l,8 (ix)
   0088 DD 66 09      [19]  160 	ld	h,9 (ix)
   008B E5            [11]  161 	push	hl
   008C DD 6E 06      [19]  162 	ld	l,6 (ix)
   008F DD 66 07      [19]  163 	ld	h,7 (ix)
   0092 E5            [11]  164 	push	hl
   0093 DD 6E FD      [19]  165 	ld	l,-3 (ix)
   0096 DD 66 FE      [19]  166 	ld	h,-2 (ix)
   0099 E5            [11]  167 	push	hl
   009A CDrA4r01      [17]  168 	call	_is_ball_colliding_with_block
   009D F1            [10]  169 	pop	af
   009E F1            [10]  170 	pop	af
   009F F1            [10]  171 	pop	af
   00A0 33            [ 6]  172 	inc	sp
   00A1 D1            [10]  173 	pop	de
   00A2 C1            [10]  174 	pop	bc
   00A3 DD 75 FF      [19]  175 	ld	-1 (ix), l
                            176 ;src/blocks.c:76: bounces |= is_ball_colliding_with_block(ball, at_x + 3, at_y, BOUNCE_Y);
   00A6 C5            [11]  177 	push	bc
   00A7 D5            [11]  178 	push	de
   00A8 3E 02         [ 7]  179 	ld	a, #0x02
   00AA F5            [11]  180 	push	af
   00AB 33            [ 6]  181 	inc	sp
   00AC DD 6E 08      [19]  182 	ld	l,8 (ix)
   00AF DD 66 09      [19]  183 	ld	h,9 (ix)
   00B2 E5            [11]  184 	push	hl
   00B3 C5            [11]  185 	push	bc
   00B4 DD 6E 04      [19]  186 	ld	l,4 (ix)
   00B7 DD 66 05      [19]  187 	ld	h,5 (ix)
   00BA E5            [11]  188 	push	hl
   00BB CDrA4r01      [17]  189 	call	_is_ball_colliding_with_block
   00BE F1            [10]  190 	pop	af
   00BF F1            [10]  191 	pop	af
   00C0 F1            [10]  192 	pop	af
   00C1 33            [ 6]  193 	inc	sp
   00C2 D1            [10]  194 	pop	de
   00C3 C1            [10]  195 	pop	bc
   00C4 DD 7E FF      [19]  196 	ld	a, -1 (ix)
   00C7 B5            [ 4]  197 	or	a, l
   00C8 DD 77 FF      [19]  198 	ld	-1 (ix), a
   00CB 18 3D         [12]  199 	jr	00106$
   00CD                     200 00105$:
                            201 ;src/blocks.c:81: bounces |= is_ball_colliding_with_block(ball, at_x, at_y + 6, BOUNCE_Y);
   00CD C5            [11]  202 	push	bc
   00CE D5            [11]  203 	push	de
   00CF 3E 02         [ 7]  204 	ld	a, #0x02
   00D1 F5            [11]  205 	push	af
   00D2 33            [ 6]  206 	inc	sp
   00D3 D5            [11]  207 	push	de
   00D4 DD 6E 06      [19]  208 	ld	l,6 (ix)
   00D7 DD 66 07      [19]  209 	ld	h,7 (ix)
   00DA E5            [11]  210 	push	hl
   00DB DD 6E FD      [19]  211 	ld	l,-3 (ix)
   00DE DD 66 FE      [19]  212 	ld	h,-2 (ix)
   00E1 E5            [11]  213 	push	hl
   00E2 CDrA4r01      [17]  214 	call	_is_ball_colliding_with_block
   00E5 F1            [10]  215 	pop	af
   00E6 F1            [10]  216 	pop	af
   00E7 F1            [10]  217 	pop	af
   00E8 33            [ 6]  218 	inc	sp
   00E9 D1            [10]  219 	pop	de
   00EA C1            [10]  220 	pop	bc
                            221 ;src/blocks.c:82: bounces |= is_ball_colliding_with_block(ball, at_x + 3, at_y + 6, BOUNCE_Y);
   00EB E5            [11]  222 	push	hl
   00EC C5            [11]  223 	push	bc
   00ED D5            [11]  224 	push	de
   00EE 3E 02         [ 7]  225 	ld	a, #0x02
   00F0 F5            [11]  226 	push	af
   00F1 33            [ 6]  227 	inc	sp
   00F2 D5            [11]  228 	push	de
   00F3 C5            [11]  229 	push	bc
   00F4 DD 6E 04      [19]  230 	ld	l,4 (ix)
   00F7 DD 66 05      [19]  231 	ld	h,5 (ix)
   00FA E5            [11]  232 	push	hl
   00FB CDrA4r01      [17]  233 	call	_is_ball_colliding_with_block
   00FE F1            [10]  234 	pop	af
   00FF F1            [10]  235 	pop	af
   0100 F1            [10]  236 	pop	af
   0101 33            [ 6]  237 	inc	sp
   0102 7D            [ 4]  238 	ld	a, l
   0103 D1            [10]  239 	pop	de
   0104 C1            [10]  240 	pop	bc
   0105 E1            [10]  241 	pop	hl
   0106 B5            [ 4]  242 	or	a, l
   0107 DD 77 FF      [19]  243 	ld	-1 (ix), a
   010A                     244 00106$:
                            245 ;src/blocks.c:85: if (ball->dx < 0)
   010A E1            [10]  246 	pop	hl
   010B E5            [11]  247 	push	hl
   010C C5            [11]  248 	push	bc
   010D 01 09 00      [10]  249 	ld	bc, #0x0009
   0110 09            [11]  250 	add	hl, bc
   0111 C1            [10]  251 	pop	bc
   0112 7E            [ 7]  252 	ld	a, (hl)
   0113 23            [ 6]  253 	inc	hl
   0114 CB 7E         [12]  254 	bit	7, (hl)
   0116 28 49         [12]  255 	jr	Z,00108$
                            256 ;src/blocks.c:88: bounces |= is_ball_colliding_with_block(ball, at_x, at_y, BOUNCE_X);
   0118 D5            [11]  257 	push	de
   0119 3E 01         [ 7]  258 	ld	a, #0x01
   011B F5            [11]  259 	push	af
   011C 33            [ 6]  260 	inc	sp
   011D DD 6E 08      [19]  261 	ld	l,8 (ix)
   0120 DD 66 09      [19]  262 	ld	h,9 (ix)
   0123 E5            [11]  263 	push	hl
   0124 DD 6E 06      [19]  264 	ld	l,6 (ix)
   0127 DD 66 07      [19]  265 	ld	h,7 (ix)
   012A E5            [11]  266 	push	hl
   012B DD 6E 04      [19]  267 	ld	l,4 (ix)
   012E DD 66 05      [19]  268 	ld	h,5 (ix)
   0131 E5            [11]  269 	push	hl
   0132 CDrA4r01      [17]  270 	call	_is_ball_colliding_with_block
   0135 F1            [10]  271 	pop	af
   0136 F1            [10]  272 	pop	af
   0137 F1            [10]  273 	pop	af
   0138 33            [ 6]  274 	inc	sp
   0139 D1            [10]  275 	pop	de
   013A DD 7E FF      [19]  276 	ld	a, -1 (ix)
   013D B5            [ 4]  277 	or	a, l
   013E DD 77 FD      [19]  278 	ld	-3 (ix), a
                            279 ;src/blocks.c:89: bounces |= is_ball_colliding_with_block(ball, at_x, at_y + 6, BOUNCE_X);
   0141 3E 01         [ 7]  280 	ld	a, #0x01
   0143 F5            [11]  281 	push	af
   0144 33            [ 6]  282 	inc	sp
   0145 D5            [11]  283 	push	de
   0146 DD 6E 06      [19]  284 	ld	l,6 (ix)
   0149 DD 66 07      [19]  285 	ld	h,7 (ix)
   014C E5            [11]  286 	push	hl
   014D DD 6E 04      [19]  287 	ld	l,4 (ix)
   0150 DD 66 05      [19]  288 	ld	h,5 (ix)
   0153 E5            [11]  289 	push	hl
   0154 CDrA4r01      [17]  290 	call	_is_ball_colliding_with_block
   0157 F1            [10]  291 	pop	af
   0158 F1            [10]  292 	pop	af
   0159 F1            [10]  293 	pop	af
   015A 33            [ 6]  294 	inc	sp
   015B DD 7E FD      [19]  295 	ld	a, -3 (ix)
   015E B5            [ 4]  296 	or	a, l
   015F 18 3D         [12]  297 	jr	00109$
   0161                     298 00108$:
                            299 ;src/blocks.c:94: bounces |= is_ball_colliding_with_block(ball, at_x + 3, at_y, BOUNCE_X);
   0161 C5            [11]  300 	push	bc
   0162 D5            [11]  301 	push	de
   0163 3E 01         [ 7]  302 	ld	a, #0x01
   0165 F5            [11]  303 	push	af
   0166 33            [ 6]  304 	inc	sp
   0167 DD 6E 08      [19]  305 	ld	l,8 (ix)
   016A DD 66 09      [19]  306 	ld	h,9 (ix)
   016D E5            [11]  307 	push	hl
   016E C5            [11]  308 	push	bc
   016F DD 6E 04      [19]  309 	ld	l,4 (ix)
   0172 DD 66 05      [19]  310 	ld	h,5 (ix)
   0175 E5            [11]  311 	push	hl
   0176 CDrA4r01      [17]  312 	call	_is_ball_colliding_with_block
   0179 F1            [10]  313 	pop	af
   017A F1            [10]  314 	pop	af
   017B F1            [10]  315 	pop	af
   017C 33            [ 6]  316 	inc	sp
   017D D1            [10]  317 	pop	de
   017E C1            [10]  318 	pop	bc
   017F DD 7E FF      [19]  319 	ld	a, -1 (ix)
   0182 B5            [ 4]  320 	or	a, l
   0183 DD 77 FD      [19]  321 	ld	-3 (ix), a
                            322 ;src/blocks.c:95: bounces |= is_ball_colliding_with_block(ball, at_x + 3, at_y + 6, BOUNCE_X);
   0186 3E 01         [ 7]  323 	ld	a, #0x01
   0188 F5            [11]  324 	push	af
   0189 33            [ 6]  325 	inc	sp
   018A D5            [11]  326 	push	de
   018B C5            [11]  327 	push	bc
   018C DD 6E 04      [19]  328 	ld	l,4 (ix)
   018F DD 66 05      [19]  329 	ld	h,5 (ix)
   0192 E5            [11]  330 	push	hl
   0193 CDrA4r01      [17]  331 	call	_is_ball_colliding_with_block
   0196 F1            [10]  332 	pop	af
   0197 F1            [10]  333 	pop	af
   0198 F1            [10]  334 	pop	af
   0199 33            [ 6]  335 	inc	sp
   019A DD 7E FD      [19]  336 	ld	a, -3 (ix)
   019D B5            [ 4]  337 	or	a, l
   019E                     338 00109$:
                            339 ;src/blocks.c:98: return bounces;
   019E 6F            [ 4]  340 	ld	l, a
   019F                     341 00110$:
   019F DD F9         [10]  342 	ld	sp, ix
   01A1 DD E1         [14]  343 	pop	ix
   01A3 C9            [10]  344 	ret
                            345 ;src/blocks.c:105: BounceHits is_ball_colliding_with_block(Ball *ball, i16 wx, i16 wy, BounceHits bounceType)
                            346 ;	---------------------------------
                            347 ; Function is_ball_colliding_with_block
                            348 ; ---------------------------------
   01A4                     349 _is_ball_colliding_with_block::
   01A4 DD E5         [15]  350 	push	ix
   01A6 DD 21 00 00   [14]  351 	ld	ix,#0
   01AA DD 39         [15]  352 	add	ix,sp
                            353 ;src/blocks.c:107: BounceHits bounces = BOUNCE_NONE;
   01AC 2E 00         [ 7]  354 	ld	l, #0x00
                            355 ;src/blocks.c:110: meta = get_metaData_at(wx, wy);
   01AE E5            [11]  356 	push	hl
   01AF DD 4E 08      [19]  357 	ld	c,8 (ix)
   01B2 DD 46 09      [19]  358 	ld	b,9 (ix)
   01B5 C5            [11]  359 	push	bc
   01B6 DD 4E 06      [19]  360 	ld	c,6 (ix)
   01B9 DD 46 07      [19]  361 	ld	b,7 (ix)
   01BC C5            [11]  362 	push	bc
   01BD CDrFAr01      [17]  363 	call	_get_metaData_at
   01C0 F1            [10]  364 	pop	af
   01C1 F1            [10]  365 	pop	af
   01C2 4D            [ 4]  366 	ld	c, l
   01C3 44            [ 4]  367 	ld	b, h
   01C4 E1            [10]  368 	pop	hl
                            369 ;src/blocks.c:111: if (meta)
   01C5 78            [ 4]  370 	ld	a, b
   01C6 B1            [ 4]  371 	or	a,c
   01C7 28 2E         [12]  372 	jr	Z,00102$
                            373 ;src/blocks.c:113: meta->is_active = 0;
   01C9 AF            [ 4]  374 	xor	a, a
   01CA 02            [ 7]  375 	ld	(bc), a
                            376 ;src/blocks.c:116: (meta->block_tile_y * TILE_H) + 24, 
   01CB 69            [ 4]  377 	ld	l, c
   01CC 60            [ 4]  378 	ld	h, b
   01CD 11 05 00      [10]  379 	ld	de, #0x0005
   01D0 19            [11]  380 	add	hl, de
   01D1 6E            [ 7]  381 	ld	l, (hl)
   01D2 26 00         [ 7]  382 	ld	h, #0x00
   01D4 29            [11]  383 	add	hl, hl
   01D5 29            [11]  384 	add	hl, hl
   01D6 EB            [ 4]  385 	ex	de,hl
   01D7 21 18 00      [10]  386 	ld	hl, #0x0018
   01DA 19            [11]  387 	add	hl,de
   01DB EB            [ 4]  388 	ex	de,hl
                            389 ;src/blocks.c:115: background_debug_box_wc((meta->block_tile_x) * TILE_W,
   01DC 69            [ 4]  390 	ld	l, c
   01DD 60            [ 4]  391 	ld	h, b
   01DE 01 04 00      [10]  392 	ld	bc, #0x0004
   01E1 09            [11]  393 	add	hl, bc
   01E2 6E            [ 7]  394 	ld	l, (hl)
   01E3 26 00         [ 7]  395 	ld	h, #0x00
   01E5 29            [11]  396 	add	hl, hl
   01E6 01 03 06      [10]  397 	ld	bc, #0x0603
   01E9 C5            [11]  398 	push	bc
   01EA D5            [11]  399 	push	de
   01EB E5            [11]  400 	push	hl
   01EC CDr00r00      [17]  401 	call	_background_debug_box_wc
   01EF 21 06 00      [10]  402 	ld	hl, #6
   01F2 39            [11]  403 	add	hl, sp
   01F3 F9            [ 6]  404 	ld	sp, hl
                            405 ;src/blocks.c:122: bounces = bounceType;
   01F4 DD 6E 0A      [19]  406 	ld	l, 10 (ix)
   01F7                     407 00102$:
                            408 ;src/blocks.c:125: return bounces;
   01F7 DD E1         [14]  409 	pop	ix
   01F9 C9            [10]  410 	ret
                            411 ;src/blocks.c:128: BlockMeta *get_metaData_at(i16 wx, i16 wy)
                            412 ;	---------------------------------
                            413 ; Function get_metaData_at
                            414 ; ---------------------------------
   01FA                     415 _get_metaData_at::
   01FA DD E5         [15]  416 	push	ix
   01FC DD 21 00 00   [14]  417 	ld	ix,#0
   0200 DD 39         [15]  418 	add	ix,sp
                            419 ;src/blocks.c:136: tx = (wx / 2);
   0202 DD 5E 04      [19]  420 	ld	e,4 (ix)
   0205 DD 56 05      [19]  421 	ld	d,5 (ix)
   0208 CB 7A         [ 8]  422 	bit	7, d
   020A 28 01         [12]  423 	jr	Z,00108$
   020C 13            [ 6]  424 	inc	de
   020D                     425 00108$:
   020D CB 2A         [ 8]  426 	sra	d
   020F CB 1B         [ 8]  427 	rr	e
                            428 ;src/blocks.c:140: ty = ((wy) / 4) - 4;
   0211 DD 4E 06      [19]  429 	ld	c,6 (ix)
   0214 DD 46 07      [19]  430 	ld	b,7 (ix)
   0217 CB 78         [ 8]  431 	bit	7, b
   0219 28 03         [12]  432 	jr	Z,00109$
   021B 03            [ 6]  433 	inc	bc
   021C 03            [ 6]  434 	inc	bc
   021D 03            [ 6]  435 	inc	bc
   021E                     436 00109$:
   021E CB 28         [ 8]  437 	sra	b
   0220 CB 19         [ 8]  438 	rr	c
   0222 CB 28         [ 8]  439 	sra	b
   0224 CB 19         [ 8]  440 	rr	c
   0226 79            [ 4]  441 	ld	a, c
   0227 C6 FC         [ 7]  442 	add	a, #0xfc
   0229 6F            [ 4]  443 	ld	l, a
   022A 78            [ 4]  444 	ld	a, b
   022B CE FF         [ 7]  445 	adc	a, #0xff
   022D 67            [ 4]  446 	ld	h, a
                            447 ;src/blocks.c:144: mx = tx / 2;
   022E 4B            [ 4]  448 	ld	c, e
   022F 42            [ 4]  449 	ld	b, d
   0230 CB 7A         [ 8]  450 	bit	7, d
   0232 28 03         [12]  451 	jr	Z,00110$
   0234 4B            [ 4]  452 	ld	c, e
   0235 42            [ 4]  453 	ld	b, d
   0236 03            [ 6]  454 	inc	bc
   0237                     455 00110$:
   0237 CB 28         [ 8]  456 	sra	b
   0239 CB 19         [ 8]  457 	rr	c
                            458 ;src/blocks.c:145: my = ty / 2;
   023B 5D            [ 4]  459 	ld	e, l
   023C 54            [ 4]  460 	ld	d, h
   023D CB 7C         [ 8]  461 	bit	7, h
   023F 28 02         [12]  462 	jr	Z,00111$
   0241 EB            [ 4]  463 	ex	de,hl
   0242 13            [ 6]  464 	inc	de
   0243                     465 00111$:
   0243 CB 2A         [ 8]  466 	sra	d
   0245 CB 1B         [ 8]  467 	rr	e
                            468 ;src/blocks.c:149: if ((mx >= BLOCKS_MAP_W / 2) || (my >= BLOCKS_MAP_H / 2))
   0247 79            [ 4]  469 	ld	a, c
   0248 D6 0D         [ 7]  470 	sub	a, #0x0d
   024A 78            [ 4]  471 	ld	a, b
   024B 17            [ 4]  472 	rla
   024C 3F            [ 4]  473 	ccf
   024D 1F            [ 4]  474 	rra
   024E DE 80         [ 7]  475 	sbc	a, #0x80
   0250 30 0B         [12]  476 	jr	NC,00101$
   0252 7B            [ 4]  477 	ld	a, e
   0253 D6 0E         [ 7]  478 	sub	a, #0x0e
   0255 7A            [ 4]  479 	ld	a, d
   0256 17            [ 4]  480 	rla
   0257 3F            [ 4]  481 	ccf
   0258 1F            [ 4]  482 	rra
   0259 DE 80         [ 7]  483 	sbc	a, #0x80
   025B 38 05         [12]  484 	jr	C,00102$
   025D                     485 00101$:
                            486 ;src/blocks.c:151: return BOUNCE_NONE;
   025D 21 00 00      [10]  487 	ld	hl, #0x0000
   0260 18 1D         [12]  488 	jr	00106$
   0262                     489 00102$:
                            490 ;src/blocks.c:154: meta = &block_meta[mx][my];
   0262 69            [ 4]  491 	ld	l, c
   0263 60            [ 4]  492 	ld	h, b
   0264 29            [11]  493 	add	hl, hl
   0265 29            [11]  494 	add	hl, hl
   0266 09            [11]  495 	add	hl, bc
   0267 29            [11]  496 	add	hl, hl
   0268 29            [11]  497 	add	hl, hl
   0269 09            [11]  498 	add	hl, bc
   026A 29            [11]  499 	add	hl, hl
   026B 29            [11]  500 	add	hl, hl
   026C 01r00r00      [10]  501 	ld	bc,#_block_meta
   026F 09            [11]  502 	add	hl,bc
   0270 4D            [ 4]  503 	ld	c, l
   0271 44            [ 4]  504 	ld	b, h
   0272 6B            [ 4]  505 	ld	l, e
   0273 62            [ 4]  506 	ld	h, d
   0274 29            [11]  507 	add	hl, hl
   0275 19            [11]  508 	add	hl, de
   0276 29            [11]  509 	add	hl, hl
   0277 09            [11]  510 	add	hl, bc
                            511 ;src/blocks.c:155: if (meta->is_active)
   0278 7E            [ 7]  512 	ld	a, (hl)
   0279 B7            [ 4]  513 	or	a, a
                            514 ;src/blocks.c:157: return meta;
   027A 20 03         [12]  515 	jr	NZ,00106$
                            516 ;src/blocks.c:159: return NULL;
   027C 21 00 00      [10]  517 	ld	hl, #0x0000
   027F                     518 00106$:
   027F DD E1         [14]  519 	pop	ix
   0281 C9            [10]  520 	ret
                            521 ;src/blocks.c:162: void draw_current_blocks()
                            522 ;	---------------------------------
                            523 ; Function draw_current_blocks
                            524 ; ---------------------------------
   0282                     525 _draw_current_blocks::
   0282 DD E5         [15]  526 	push	ix
   0284 DD 21 00 00   [14]  527 	ld	ix,#0
   0288 DD 39         [15]  528 	add	ix,sp
   028A F5            [11]  529 	push	af
   028B 3B            [ 6]  530 	dec	sp
                            531 ;src/blocks.c:164: u8 *pvmem = cpct_getScreenPtr(CPCT_VMEM_START, W_2_S_X(0),
   028C 21 0C 18      [10]  532 	ld	hl, #0x180c
   028F E5            [11]  533 	push	hl
   0290 21 00 C0      [10]  534 	ld	hl, #0xc000
   0293 E5            [11]  535 	push	hl
   0294 CDr00r00      [17]  536 	call	_cpct_getScreenPtr
   0297 EB            [ 4]  537 	ex	de,hl
                            538 ;src/blocks.c:166: for (u8 y = 0; y < BLOCKS_MAP_H / 2; y++)
   0298 0E 00         [ 7]  539 	ld	c, #0x00
   029A                     540 00109$:
                            541 ;src/blocks.c:168: for (u8 x = 0; x < BLOCKS_MAP_W / 2; x++)
   029A 79            [ 4]  542 	ld	a,c
   029B FE 0E         [ 7]  543 	cp	a,#0x0e
   029D 30 66         [12]  544 	jr	NC,00111$
   029F 87            [ 4]  545 	add	a, a
   02A0 DD 77 FE      [19]  546 	ld	-2 (ix), a
   02A3 79            [ 4]  547 	ld	a, c
   02A4 87            [ 4]  548 	add	a, a
   02A5 81            [ 4]  549 	add	a, c
   02A6 87            [ 4]  550 	add	a, a
   02A7 DD 77 FD      [19]  551 	ld	-3 (ix), a
   02AA 06 00         [ 7]  552 	ld	b, #0x00
   02AC                     553 00106$:
   02AC 78            [ 4]  554 	ld	a, b
   02AD D6 0D         [ 7]  555 	sub	a, #0x0d
   02AF 30 51         [12]  556 	jr	NC,00110$
                            557 ;src/blocks.c:170: BlockMeta *meta = &block_meta[x][y];
   02B1 D5            [11]  558 	push	de
   02B2 58            [ 4]  559 	ld	e,b
   02B3 16 00         [ 7]  560 	ld	d,#0x00
   02B5 6B            [ 4]  561 	ld	l, e
   02B6 62            [ 4]  562 	ld	h, d
   02B7 29            [11]  563 	add	hl, hl
   02B8 29            [11]  564 	add	hl, hl
   02B9 19            [11]  565 	add	hl, de
   02BA 29            [11]  566 	add	hl, hl
   02BB 29            [11]  567 	add	hl, hl
   02BC 19            [11]  568 	add	hl, de
   02BD 29            [11]  569 	add	hl, hl
   02BE 29            [11]  570 	add	hl, hl
   02BF D1            [10]  571 	pop	de
   02C0 3Er00         [ 7]  572 	ld	a, #<(_block_meta)
   02C2 85            [ 4]  573 	add	a, l
   02C3 6F            [ 4]  574 	ld	l, a
   02C4 3Es00         [ 7]  575 	ld	a, #>(_block_meta)
   02C6 8C            [ 4]  576 	adc	a, h
   02C7 67            [ 4]  577 	ld	h, a
   02C8 7D            [ 4]  578 	ld	a, l
   02C9 DD 86 FD      [19]  579 	add	a, -3 (ix)
   02CC 6F            [ 4]  580 	ld	l, a
   02CD 7C            [ 4]  581 	ld	a, h
   02CE CE 00         [ 7]  582 	adc	a, #0x00
   02D0 67            [ 4]  583 	ld	h, a
                            584 ;src/blocks.c:172: if (meta->is_active)
   02D1 7E            [ 7]  585 	ld	a, (hl)
   02D2 B7            [ 4]  586 	or	a, a
   02D3 28 2A         [12]  587 	jr	Z,00107$
                            588 ;src/blocks.c:175: current_level->blocks_tilemap);
   02D5 2Ar00r00      [16]  589 	ld	hl, (_current_level)
   02D8 23            [ 6]  590 	inc	hl
   02D9 23            [ 6]  591 	inc	hl
   02DA 7E            [ 7]  592 	ld	a, (hl)
   02DB 23            [ 6]  593 	inc	hl
   02DC 66            [ 7]  594 	ld	h, (hl)
   02DD 6F            [ 4]  595 	ld	l, a
                            596 ;src/blocks.c:174: cpct_etm_drawTileBox2x4(x * 2, y * 2, 2, 2, BLOCKS_MAP_W, pvmem,
   02DE D5            [11]  597 	push	de
   02DF FD E1         [14]  598 	pop	iy
   02E1 78            [ 4]  599 	ld	a, b
   02E2 87            [ 4]  600 	add	a, a
   02E3 DD 77 FF      [19]  601 	ld	-1 (ix), a
   02E6 C5            [11]  602 	push	bc
   02E7 D5            [11]  603 	push	de
   02E8 E5            [11]  604 	push	hl
   02E9 FD E5         [15]  605 	push	iy
   02EB 21 02 1A      [10]  606 	ld	hl, #0x1a02
   02EE E5            [11]  607 	push	hl
   02EF 3E 02         [ 7]  608 	ld	a, #0x02
   02F1 F5            [11]  609 	push	af
   02F2 33            [ 6]  610 	inc	sp
   02F3 DD 66 FE      [19]  611 	ld	h, -2 (ix)
   02F6 DD 6E FF      [19]  612 	ld	l, -1 (ix)
   02F9 E5            [11]  613 	push	hl
   02FA CDr00r00      [17]  614 	call	_cpct_etm_drawTileBox2x4
   02FD D1            [10]  615 	pop	de
   02FE C1            [10]  616 	pop	bc
   02FF                     617 00107$:
                            618 ;src/blocks.c:168: for (u8 x = 0; x < BLOCKS_MAP_W / 2; x++)
   02FF 04            [ 4]  619 	inc	b
   0300 18 AA         [12]  620 	jr	00106$
   0302                     621 00110$:
                            622 ;src/blocks.c:166: for (u8 y = 0; y < BLOCKS_MAP_H / 2; y++)
   0302 0C            [ 4]  623 	inc	c
   0303 18 95         [12]  624 	jr	00109$
   0305                     625 00111$:
   0305 DD F9         [10]  626 	ld	sp, ix
   0307 DD E1         [14]  627 	pop	ix
   0309 C9            [10]  628 	ret
                            629 ;src/blocks.c:184: void map_blocks_to_meta()
                            630 ;	---------------------------------
                            631 ; Function map_blocks_to_meta
                            632 ; ---------------------------------
   030A                     633 _map_blocks_to_meta::
   030A DD E5         [15]  634 	push	ix
   030C DD 21 00 00   [14]  635 	ld	ix,#0
   0310 DD 39         [15]  636 	add	ix,sp
   0312 F5            [11]  637 	push	af
   0313 F5            [11]  638 	push	af
   0314 3B            [ 6]  639 	dec	sp
                            640 ;src/blocks.c:188: for (u8 y = 0; y < BLOCKS_MAP_H; y += 2)
   0315 DD 36 FC 00   [19]  641 	ld	-4 (ix), #0x00
   0319                     642 00119$:
   0319 DD 7E FC      [19]  643 	ld	a, -4 (ix)
   031C D6 1C         [ 7]  644 	sub	a, #0x1c
   031E D2rD0r04      [10]  645 	jp	NC, 00121$
                            646 ;src/blocks.c:190: for (u8 x = 0; x < BLOCKS_MAP_W; x += 2)
   0321 DD 4E FC      [19]  647 	ld	c,-4 (ix)
   0324 06 00         [ 7]  648 	ld	b,#0x00
   0326 69            [ 4]  649 	ld	l, c
   0327 60            [ 4]  650 	ld	h, b
   0328 29            [11]  651 	add	hl, hl
   0329 09            [11]  652 	add	hl, bc
   032A 29            [11]  653 	add	hl, hl
   032B 29            [11]  654 	add	hl, hl
   032C 09            [11]  655 	add	hl, bc
   032D 29            [11]  656 	add	hl, hl
   032E DD 75 FD      [19]  657 	ld	-3 (ix), l
   0331 DD 74 FE      [19]  658 	ld	-2 (ix), h
   0334 DD 4E FC      [19]  659 	ld	c, -4 (ix)
   0337 CB 39         [ 8]  660 	srl	c
   0339 79            [ 4]  661 	ld	a, c
   033A 87            [ 4]  662 	add	a, a
   033B 81            [ 4]  663 	add	a, c
   033C 87            [ 4]  664 	add	a, a
   033D DD 77 FF      [19]  665 	ld	-1 (ix), a
   0340 DD 36 FB 00   [19]  666 	ld	-5 (ix), #0x00
   0344                     667 00116$:
   0344 DD 7E FB      [19]  668 	ld	a, -5 (ix)
   0347 D6 1A         [ 7]  669 	sub	a, #0x1a
   0349 D2rC7r04      [10]  670 	jp	NC, 00120$
                            671 ;src/blocks.c:192: u8 tile = current_level->blocks_tilemap[(y * BLOCKS_MAP_W) + x];
   034C 2Ar00r00      [16]  672 	ld	hl, (_current_level)
   034F 23            [ 6]  673 	inc	hl
   0350 23            [ 6]  674 	inc	hl
   0351 4E            [ 7]  675 	ld	c, (hl)
   0352 23            [ 6]  676 	inc	hl
   0353 46            [ 7]  677 	ld	b, (hl)
   0354 DD 5E FB      [19]  678 	ld	e, -5 (ix)
   0357 16 00         [ 7]  679 	ld	d, #0x00
   0359 DD 6E FD      [19]  680 	ld	l,-3 (ix)
   035C DD 66 FE      [19]  681 	ld	h,-2 (ix)
   035F 19            [11]  682 	add	hl, de
   0360 09            [11]  683 	add	hl, bc
   0361 7E            [ 7]  684 	ld	a, (hl)
                            685 ;src/blocks.c:193: switch (tile)
   0362 B7            [ 4]  686 	or	a, a
   0363 28 2C         [12]  687 	jr	Z,00101$
   0365 FE 02         [ 7]  688 	cp	a, #0x02
   0367 28 3F         [12]  689 	jr	Z,00102$
   0369 FE 04         [ 7]  690 	cp	a, #0x04
   036B 28 53         [12]  691 	jr	Z,00103$
   036D FE 06         [ 7]  692 	cp	a, #0x06
   036F 28 67         [12]  693 	jr	Z,00104$
   0371 FE 08         [ 7]  694 	cp	a, #0x08
   0373 28 7B         [12]  695 	jr	Z,00105$
   0375 FE 0A         [ 7]  696 	cp	a, #0x0a
   0377 CAr08r04      [10]  697 	jp	Z,00106$
   037A FE 0C         [ 7]  698 	cp	a, #0x0c
   037C CAr20r04      [10]  699 	jp	Z,00107$
   037F FE 0E         [ 7]  700 	cp	a, #0x0e
   0381 CAr38r04      [10]  701 	jp	Z,00108$
   0384 FE 10         [ 7]  702 	cp	a, #0x10
   0386 CAr4Fr04      [10]  703 	jp	Z,00109$
   0389 D6 12         [ 7]  704 	sub	a, #0x12
   038B CAr72r04      [10]  705 	jp	Z,00110$
   038E C3r89r04      [10]  706 	jp	00111$
                            707 ;src/blocks.c:195: case WHITE_BLOCK:
   0391                     708 00101$:
                            709 ;src/blocks.c:196: plant_tile_meta(x, y, WHITE_BLOCK, WHITE_SCORE, SINGLE_HIT_TO_REMOVE);
   0391 21 32 01      [10]  710 	ld	hl, #0x0132
   0394 E5            [11]  711 	push	hl
   0395 AF            [ 4]  712 	xor	a, a
   0396 F5            [11]  713 	push	af
   0397 33            [ 6]  714 	inc	sp
   0398 DD 66 FC      [19]  715 	ld	h, -4 (ix)
   039B DD 6E FB      [19]  716 	ld	l, -5 (ix)
   039E E5            [11]  717 	push	hl
   039F CDrD5r04      [17]  718 	call	_plant_tile_meta
   03A2 F1            [10]  719 	pop	af
   03A3 F1            [10]  720 	pop	af
   03A4 33            [ 6]  721 	inc	sp
                            722 ;src/blocks.c:197: break;
   03A5 C3rBEr04      [10]  723 	jp	00117$
                            724 ;src/blocks.c:198: case ORANGE_BLOCK:
   03A8                     725 00102$:
                            726 ;src/blocks.c:199: plant_tile_meta(x, y, ORANGE_BLOCK, ORANGE_SCORE, SINGLE_HIT_TO_REMOVE);
   03A8 21 3C 01      [10]  727 	ld	hl, #0x013c
   03AB E5            [11]  728 	push	hl
   03AC 3E 02         [ 7]  729 	ld	a, #0x02
   03AE F5            [11]  730 	push	af
   03AF 33            [ 6]  731 	inc	sp
   03B0 DD 66 FC      [19]  732 	ld	h, -4 (ix)
   03B3 DD 6E FB      [19]  733 	ld	l, -5 (ix)
   03B6 E5            [11]  734 	push	hl
   03B7 CDrD5r04      [17]  735 	call	_plant_tile_meta
   03BA F1            [10]  736 	pop	af
   03BB F1            [10]  737 	pop	af
   03BC 33            [ 6]  738 	inc	sp
                            739 ;src/blocks.c:200: break;
   03BD C3rBEr04      [10]  740 	jp	00117$
                            741 ;src/blocks.c:201: case CYAN_BLOCK:
   03C0                     742 00103$:
                            743 ;src/blocks.c:202: plant_tile_meta(x, y, CYAN_BLOCK, CYAN_SCORE, SINGLE_HIT_TO_REMOVE);
   03C0 21 46 01      [10]  744 	ld	hl, #0x0146
   03C3 E5            [11]  745 	push	hl
   03C4 3E 04         [ 7]  746 	ld	a, #0x04
   03C6 F5            [11]  747 	push	af
   03C7 33            [ 6]  748 	inc	sp
   03C8 DD 66 FC      [19]  749 	ld	h, -4 (ix)
   03CB DD 6E FB      [19]  750 	ld	l, -5 (ix)
   03CE E5            [11]  751 	push	hl
   03CF CDrD5r04      [17]  752 	call	_plant_tile_meta
   03D2 F1            [10]  753 	pop	af
   03D3 F1            [10]  754 	pop	af
   03D4 33            [ 6]  755 	inc	sp
                            756 ;src/blocks.c:203: break;
   03D5 C3rBEr04      [10]  757 	jp	00117$
                            758 ;src/blocks.c:204: case GREEN_BLOCK:
   03D8                     759 00104$:
                            760 ;src/blocks.c:205: plant_tile_meta(x, y, GREEN_BLOCK, GREEN_SCORE, SINGLE_HIT_TO_REMOVE);
   03D8 21 50 01      [10]  761 	ld	hl, #0x0150
   03DB E5            [11]  762 	push	hl
   03DC 3E 06         [ 7]  763 	ld	a, #0x06
   03DE F5            [11]  764 	push	af
   03DF 33            [ 6]  765 	inc	sp
   03E0 DD 66 FC      [19]  766 	ld	h, -4 (ix)
   03E3 DD 6E FB      [19]  767 	ld	l, -5 (ix)
   03E6 E5            [11]  768 	push	hl
   03E7 CDrD5r04      [17]  769 	call	_plant_tile_meta
   03EA F1            [10]  770 	pop	af
   03EB F1            [10]  771 	pop	af
   03EC 33            [ 6]  772 	inc	sp
                            773 ;src/blocks.c:206: break;
   03ED C3rBEr04      [10]  774 	jp	00117$
                            775 ;src/blocks.c:207: case RED_BLOCK:
   03F0                     776 00105$:
                            777 ;src/blocks.c:208: plant_tile_meta(x, y, RED_BLOCK, RED_SCORE, SINGLE_HIT_TO_REMOVE);
   03F0 21 5A 01      [10]  778 	ld	hl, #0x015a
   03F3 E5            [11]  779 	push	hl
   03F4 3E 08         [ 7]  780 	ld	a, #0x08
   03F6 F5            [11]  781 	push	af
   03F7 33            [ 6]  782 	inc	sp
   03F8 DD 66 FC      [19]  783 	ld	h, -4 (ix)
   03FB DD 6E FB      [19]  784 	ld	l, -5 (ix)
   03FE E5            [11]  785 	push	hl
   03FF CDrD5r04      [17]  786 	call	_plant_tile_meta
   0402 F1            [10]  787 	pop	af
   0403 F1            [10]  788 	pop	af
   0404 33            [ 6]  789 	inc	sp
                            790 ;src/blocks.c:209: break;
   0405 C3rBEr04      [10]  791 	jp	00117$
                            792 ;src/blocks.c:210: case BLUE_BLOCK:
   0408                     793 00106$:
                            794 ;src/blocks.c:211: plant_tile_meta(x, y, BLUE_BLOCK, BLUE_SCORE, SINGLE_HIT_TO_REMOVE);
   0408 21 64 01      [10]  795 	ld	hl, #0x0164
   040B E5            [11]  796 	push	hl
   040C 3E 0A         [ 7]  797 	ld	a, #0x0a
   040E F5            [11]  798 	push	af
   040F 33            [ 6]  799 	inc	sp
   0410 DD 66 FC      [19]  800 	ld	h, -4 (ix)
   0413 DD 6E FB      [19]  801 	ld	l, -5 (ix)
   0416 E5            [11]  802 	push	hl
   0417 CDrD5r04      [17]  803 	call	_plant_tile_meta
   041A F1            [10]  804 	pop	af
   041B F1            [10]  805 	pop	af
   041C 33            [ 6]  806 	inc	sp
                            807 ;src/blocks.c:212: break;
   041D C3rBEr04      [10]  808 	jp	00117$
                            809 ;src/blocks.c:213: case MAGENTA_BLOCK:
   0420                     810 00107$:
                            811 ;src/blocks.c:214: plant_tile_meta(x, y, MAGENTA_BLOCK, MAGENTA_SCORE, SINGLE_HIT_TO_REMOVE);
   0420 21 6E 01      [10]  812 	ld	hl, #0x016e
   0423 E5            [11]  813 	push	hl
   0424 3E 0C         [ 7]  814 	ld	a, #0x0c
   0426 F5            [11]  815 	push	af
   0427 33            [ 6]  816 	inc	sp
   0428 DD 66 FC      [19]  817 	ld	h, -4 (ix)
   042B DD 6E FB      [19]  818 	ld	l, -5 (ix)
   042E E5            [11]  819 	push	hl
   042F CDrD5r04      [17]  820 	call	_plant_tile_meta
   0432 F1            [10]  821 	pop	af
   0433 F1            [10]  822 	pop	af
   0434 33            [ 6]  823 	inc	sp
                            824 ;src/blocks.c:215: break;
   0435 C3rBEr04      [10]  825 	jp	00117$
                            826 ;src/blocks.c:216: case YELLOW_BLOCK:
   0438                     827 00108$:
                            828 ;src/blocks.c:217: plant_tile_meta(x, y, YELLOW_BLOCK, YELLOW_SCORE, SINGLE_HIT_TO_REMOVE);
   0438 21 78 01      [10]  829 	ld	hl, #0x0178
   043B E5            [11]  830 	push	hl
   043C 3E 0E         [ 7]  831 	ld	a, #0x0e
   043E F5            [11]  832 	push	af
   043F 33            [ 6]  833 	inc	sp
   0440 DD 66 FC      [19]  834 	ld	h, -4 (ix)
   0443 DD 6E FB      [19]  835 	ld	l, -5 (ix)
   0446 E5            [11]  836 	push	hl
   0447 CDrD5r04      [17]  837 	call	_plant_tile_meta
   044A F1            [10]  838 	pop	af
   044B F1            [10]  839 	pop	af
   044C 33            [ 6]  840 	inc	sp
                            841 ;src/blocks.c:218: break;
   044D 18 6F         [12]  842 	jr	00117$
                            843 ;src/blocks.c:219: case STEEL_BLOCK:
   044F                     844 00109$:
                            845 ;src/blocks.c:222: current_level->steel_score);
   044F 2Ar00r00      [16]  846 	ld	hl, (_current_level)
   0452 11 04 00      [10]  847 	ld	de, #0x0004
   0455 19            [11]  848 	add	hl, de
   0456 56            [ 7]  849 	ld	d, (hl)
                            850 ;src/blocks.c:221: current_level->steel_hits_to_destroy, 
   0457 FD 2Ar00r00   [20]  851 	ld	iy, (_current_level)
                            852 ;src/blocks.c:220: plant_tile_meta(x, y, STEEL_BLOCK, 
   045B FD 5E 05      [19]  853 	ld	e, 5 (iy)
   045E D5            [11]  854 	push	de
   045F 3E 10         [ 7]  855 	ld	a, #0x10
   0461 F5            [11]  856 	push	af
   0462 33            [ 6]  857 	inc	sp
   0463 DD 66 FC      [19]  858 	ld	h, -4 (ix)
   0466 DD 6E FB      [19]  859 	ld	l, -5 (ix)
   0469 E5            [11]  860 	push	hl
   046A CDrD5r04      [17]  861 	call	_plant_tile_meta
   046D F1            [10]  862 	pop	af
   046E F1            [10]  863 	pop	af
   046F 33            [ 6]  864 	inc	sp
                            865 ;src/blocks.c:223: break;
   0470 18 4C         [12]  866 	jr	00117$
                            867 ;src/blocks.c:224: case GOLD_BLOCK:
   0472                     868 00110$:
                            869 ;src/blocks.c:225: plant_tile_meta(x, y, GOLD_BLOCK, 0, INDESTRUCTABLE);
   0472 21 00 FF      [10]  870 	ld	hl, #0xff00
   0475 E5            [11]  871 	push	hl
   0476 3E 12         [ 7]  872 	ld	a, #0x12
   0478 F5            [11]  873 	push	af
   0479 33            [ 6]  874 	inc	sp
   047A DD 66 FC      [19]  875 	ld	h, -4 (ix)
   047D DD 6E FB      [19]  876 	ld	l, -5 (ix)
   0480 E5            [11]  877 	push	hl
   0481 CDrD5r04      [17]  878 	call	_plant_tile_meta
   0484 F1            [10]  879 	pop	af
   0485 F1            [10]  880 	pop	af
   0486 33            [ 6]  881 	inc	sp
                            882 ;src/blocks.c:226: break;
   0487 18 35         [12]  883 	jr	00117$
                            884 ;src/blocks.c:227: default:
   0489                     885 00111$:
                            886 ;src/blocks.c:229: block_meta[x / 2][y / 2].is_active = 0;
   0489 DD 4E FB      [19]  887 	ld	c, -5 (ix)
   048C CB 39         [ 8]  888 	srl	c
   048E 06 00         [ 7]  889 	ld	b,#0x00
   0490 69            [ 4]  890 	ld	l, c
   0491 60            [ 4]  891 	ld	h, b
   0492 29            [11]  892 	add	hl, hl
   0493 29            [11]  893 	add	hl, hl
   0494 09            [11]  894 	add	hl, bc
   0495 29            [11]  895 	add	hl, hl
   0496 29            [11]  896 	add	hl, hl
   0497 09            [11]  897 	add	hl, bc
   0498 29            [11]  898 	add	hl, hl
   0499 29            [11]  899 	add	hl, hl
   049A 01r00r00      [10]  900 	ld	bc,#_block_meta
   049D 09            [11]  901 	add	hl,bc
   049E 4D            [ 4]  902 	ld	c, l
   049F 44            [ 4]  903 	ld	b, h
   04A0 DD 6E FF      [19]  904 	ld	l,-1 (ix)
   04A3 26 00         [ 7]  905 	ld	h,#0x00
   04A5 09            [11]  906 	add	hl, bc
   04A6 36 00         [10]  907 	ld	(hl), #0x00
                            908 ;src/blocks.c:230: block_meta[x / 2][y / 2].score = 0;
   04A8 DD 7E FF      [19]  909 	ld	a, -1 (ix)
   04AB 81            [ 4]  910 	add	a, c
   04AC 4F            [ 4]  911 	ld	c, a
   04AD 3E 00         [ 7]  912 	ld	a, #0x00
   04AF 88            [ 4]  913 	adc	a, b
   04B0 47            [ 4]  914 	ld	b, a
   04B1 59            [ 4]  915 	ld	e, c
   04B2 50            [ 4]  916 	ld	d, b
   04B3 13            [ 6]  917 	inc	de
   04B4 13            [ 6]  918 	inc	de
   04B5 AF            [ 4]  919 	xor	a, a
   04B6 12            [ 7]  920 	ld	(de), a
                            921 ;src/blocks.c:231: block_meta[x / 2][y / 2].remaining_hits = 0;
   04B7 03            [ 6]  922 	inc	bc
   04B8 03            [ 6]  923 	inc	bc
   04B9 03            [ 6]  924 	inc	bc
   04BA 60            [ 4]  925 	ld	h, b
   04BB 69            [ 4]  926 	ld	l, c
   04BC 36 00         [10]  927 	ld	(hl), #0x00
                            928 ;src/blocks.c:234: }
   04BE                     929 00117$:
                            930 ;src/blocks.c:190: for (u8 x = 0; x < BLOCKS_MAP_W; x += 2)
   04BE DD 34 FB      [23]  931 	inc	-5 (ix)
   04C1 DD 34 FB      [23]  932 	inc	-5 (ix)
   04C4 C3r44r03      [10]  933 	jp	00116$
   04C7                     934 00120$:
                            935 ;src/blocks.c:188: for (u8 y = 0; y < BLOCKS_MAP_H; y += 2)
   04C7 DD 34 FC      [23]  936 	inc	-4 (ix)
   04CA DD 34 FC      [23]  937 	inc	-4 (ix)
   04CD C3r19r03      [10]  938 	jp	00119$
   04D0                     939 00121$:
   04D0 DD F9         [10]  940 	ld	sp, ix
   04D2 DD E1         [14]  941 	pop	ix
   04D4 C9            [10]  942 	ret
                            943 ;src/blocks.c:239: void plant_tile_meta(u8 map_x, u8 map_y, u8 tile_type, u8 score, u8 hits_to_destroy)
                            944 ;	---------------------------------
                            945 ; Function plant_tile_meta
                            946 ; ---------------------------------
   04D5                     947 _plant_tile_meta::
   04D5 DD E5         [15]  948 	push	ix
   04D7 DD 21 00 00   [14]  949 	ld	ix,#0
   04DB DD 39         [15]  950 	add	ix,sp
                            951 ;src/blocks.c:241: block_meta[map_x / 2][map_y / 2].is_active = 1;
   04DD 01r00r00      [10]  952 	ld	bc, #_block_meta+0
   04E0 DD 5E 04      [19]  953 	ld	e, 4 (ix)
   04E3 CB 3B         [ 8]  954 	srl	e
   04E5 16 00         [ 7]  955 	ld	d,#0x00
   04E7 6B            [ 4]  956 	ld	l, e
   04E8 62            [ 4]  957 	ld	h, d
   04E9 29            [11]  958 	add	hl, hl
   04EA 29            [11]  959 	add	hl, hl
   04EB 19            [11]  960 	add	hl, de
   04EC 29            [11]  961 	add	hl, hl
   04ED 29            [11]  962 	add	hl, hl
   04EE 19            [11]  963 	add	hl, de
   04EF 29            [11]  964 	add	hl, hl
   04F0 29            [11]  965 	add	hl, hl
   04F1 09            [11]  966 	add	hl,bc
   04F2 4D            [ 4]  967 	ld	c, l
   04F3 44            [ 4]  968 	ld	b, h
   04F4 DD 5E 05      [19]  969 	ld	e, 5 (ix)
   04F7 CB 3B         [ 8]  970 	srl	e
   04F9 6B            [ 4]  971 	ld	l, e
   04FA 29            [11]  972 	add	hl, hl
   04FB 19            [11]  973 	add	hl, de
   04FC 29            [11]  974 	add	hl, hl
   04FD 7D            [ 4]  975 	ld	a, l
   04FE 81            [ 4]  976 	add	a, c
   04FF 4F            [ 4]  977 	ld	c, a
   0500 3E 00         [ 7]  978 	ld	a, #0x00
   0502 88            [ 4]  979 	adc	a, b
   0503 47            [ 4]  980 	ld	b, a
   0504 3E 01         [ 7]  981 	ld	a, #0x01
   0506 02            [ 7]  982 	ld	(bc), a
                            983 ;src/blocks.c:242: block_meta[map_x / 2][map_y / 2].score = score;
   0507 59            [ 4]  984 	ld	e, c
   0508 50            [ 4]  985 	ld	d, b
   0509 13            [ 6]  986 	inc	de
   050A 13            [ 6]  987 	inc	de
   050B DD 7E 07      [19]  988 	ld	a, 7 (ix)
   050E 12            [ 7]  989 	ld	(de), a
                            990 ;src/blocks.c:243: block_meta[map_x / 2][map_y / 2].remaining_hits = hits_to_destroy;
   050F 59            [ 4]  991 	ld	e, c
   0510 50            [ 4]  992 	ld	d, b
   0511 13            [ 6]  993 	inc	de
   0512 13            [ 6]  994 	inc	de
   0513 13            [ 6]  995 	inc	de
   0514 DD 7E 08      [19]  996 	ld	a, 8 (ix)
   0517 12            [ 7]  997 	ld	(de), a
                            998 ;src/blocks.c:244: block_meta[map_x / 2][map_y / 2].type = tile_type;
   0518 59            [ 4]  999 	ld	e, c
   0519 50            [ 4] 1000 	ld	d, b
   051A 13            [ 6] 1001 	inc	de
   051B DD 7E 06      [19] 1002 	ld	a, 6 (ix)
   051E 12            [ 7] 1003 	ld	(de), a
                           1004 ;src/blocks.c:245: block_meta[map_x / 2][map_y / 2].block_tile_x = map_x;
   051F 21 04 00      [10] 1005 	ld	hl, #0x0004
   0522 09            [11] 1006 	add	hl, bc
   0523 DD 7E 04      [19] 1007 	ld	a, 4 (ix)
   0526 77            [ 7] 1008 	ld	(hl), a
                           1009 ;src/blocks.c:246: block_meta[map_x / 2][map_y / 2].block_tile_y = map_y;
   0527 21 05 00      [10] 1010 	ld	hl, #0x0005
   052A 09            [11] 1011 	add	hl, bc
   052B DD 7E 05      [19] 1012 	ld	a, 5 (ix)
   052E 77            [ 7] 1013 	ld	(hl), a
   052F DD E1         [14] 1014 	pop	ix
   0531 C9            [10] 1015 	ret
                           1016 	.area _CODE
                           1017 	.area _INITIALIZER
                           1018 	.area _CABS (ABS)
